{"version":3,"sources":["hello.js","facebook.js","github.js","google.js","jb-hub.js","hello.amd.js"],"names":["hello","name","use","utils","extend","r","Array","prototype","slice","call","arguments","forEach","a","Object","x","settings","redirect_uri","window","location","href","split","response_type","display","state","oauth_proxy","timeout","default_service","force","page_uri","services","service","self","create","this","Event","init","options","hasOwnProperty","id","scope","url","login","emit","s","value","encodeFunction","_this","error","promise","Promise","p","args","network","callback","opts","merge","proxy","then","bind","reject","provider","callbackId","globalEvent","str","obj","JSON","parse","store","fulfill","authResponse","redirectUri","responseType","oauth","test","grant","replace","qs","client_id","encodeURIComponent","session","toString","pQsStateScopeArray","unique","join","m","serviceScopes","scope_delim","access_token","expires","Date","now","diff","length","unchanged","parseInt","version","refresh_token","stringify","auth","iframe","popup","window_width","window_height","timer","setInterval","closed","clearInterval","response","logout","_opts","message","undefined","getAuthResponse","events","code","params","formatFunction","reg","indexOf","RegExp","isEmpty","param","b","decodeURIComponent","match","i","o","push","localStorage","get","json","getItem","e","set","setItem","sessionStorage","removeItem","prop","document","cookie","_m","substr","days","append","node","attr","target","n","createElement","y","innerHTML","setAttribute","body","appendChild","setTimeout","getElementsByTagName","src","style","position","left","bottom","height","width","unshift","apply","t","path","URL","Function","filter","item","isArray","index","key","STATE_PENDING","STATE_FULFILLED","STATE_REJECTED","api","executor","fulfillValue","rejectReason","onFulfilled","onRejected","deliver","curr","next","resolver","execute","execute_handlers","handlers","func","process","nextTick","setImmediate","cb","method","result","resolve","TypeError","resolved","separator","parent","findEvents","on","evt","concat","off","handler","emitAfter","guid","Math","random","bool","console","windowWidth","windowHeight","documentElement","dualScreenLeft","screenLeft","screen","dualScreenTop","screenTop","top","innerWidth","clientWidth","innerHeight","clientHeight","open","addEventListener","redirectUriOrigin","origin","protocol","hostname","_popup","assign","search","hash","close","responseHandler","focus","navigator","userAgent","authCallback","closeWindow","oauth_token","proxy_url","expiresIn","expires_in","parsedExpiresIn","error_message","error_description","res","oauth_redirect","opener","oldSessions","expired","CURRENT_TIME","eventName","oldSess","refresh","getPath","defaults","val","query","base","request","headers","success","wrap","paging","data","toLowerCase","clone","actions","delete","xhr","jsonp","form","formatUrl","sign","proxy_response_type","suppress_response_codes","hasBinary","XMLHttpRequest","onprogress","upload","onuploadprogress","_query","callbackID","post","domInstance","type","toUpperCase","Element","tagName","String","Number","isBinary","map","headersToJSON","exec","binary","onload","responseText","_e","status","statusText","getAllResponseHeaders","statusCode","onerror","FormData","File","Blob","f","HTMLInputElement","files","overrideMimeType","setRequestHeader","send","operaFix","head","removeChild","script","async","onreadystatechange","readyState","text","newform","doc","reenableAfterSubmit","win","callbackonload","elements","disabled","encoding","enctype","input","el","inputs","NodeList","parentNode","innerText","getAttribute","submit","ee","FileList","toBlob","dataURI","atob","array","charCodeAt","Uint8Array","dataToJSON","w","nodeListToJSON","file","nodelist","formatUser","thumbnail","picture","formatFriends","format","req","token","d","cover_photo","photos","can_upload","upload_location","facebook","basic","email","birthday","videos","friends","publish_files","publish","offline_access","auth_type","redirect","me","me/friends","me/following","me/followers","me/share","me/like","me/files","me/albums","me/album","me/photos","me/photo","friend/albums","friend/photos","default","formatError","meta","avatar_url","Link","github","toInt","formatFeed","items","formatItem","title","thumbnailLink","mimeType","formatImage","source","gEntry","feed","entry","formatEntry","formatPerson","displayName","image","$t","gd$email","address","emails","updated","link","pic","category","_a","group","media$group","media","media$content","description","summary","updated_time","created_time","published","images","rel","scheme","term","media$thumbnail","openSearch$itemsPerPage","limit","start","openSearch$startIndex","total","openSearch$totalResults","nextPageToken","Multipart","addFile","fr","FileReader","addContent","btoa","lineBreak","readAsBinaryString","content","counter","ready","boundary","delim","dataUri","onready","fn","uploadDrive","parents","parts","toJSON","contactsUrl","google","create_event","access_type","me/contacts","me/feed","me/folders","me/folder","put","del","last_name","family_name","familyName","first_name","given_name","givenName","jbHub","accessToken","Authorization","Accept","define","amd"],"mappings":"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","file":"hello-1.5.1.js","sourcesContent":["/**\n * @hello.js\n *\n * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.\n *\n * @author Andrew Dodson\n * @website https://adodson.com/hello.js/\n *\n * @copyright Andrew Dodson, 2012 - 2015\n * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.\n */\n\nvar hello = function(name) {\n\treturn hello.use(name);\n};\n\nhello.utils = {\n\n\t// Extend the first object with the properties and methods of the second\n\textend: function(r /*, a[, b[, ...]] */) {\n\n\t\t// Get the arguments as an array but ommit the initial item\n\t\tArray.prototype.slice.call(arguments, 1).forEach(function(a) {\n\t\t\tif (r instanceof Object && a instanceof Object && r !== a) {\n\t\t\t\tfor (var x in a) {\n\t\t\t\t\tr[x] = hello.utils.extend(r[x], a[x]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr = a;\n\t\t\t}\n\t\t});\n\n\t\treturn r;\n\t}\n};\n\n// Core library\nhello.utils.extend(hello, {\n\n\tsettings: {\n\n\t\t// OAuth2 authentication defaults\n\t\tredirect_uri: window.location.href.split('#')[0],\n\t\tresponse_type: 'token',\n\t\tdisplay: 'popup',\n\t\tstate: '',\n\n\t\t// OAuth1 shim\n\t\t// The path to the OAuth1 server for signing user requests\n\t\t// Want to recreate your own? Checkout https://github.com/MrSwitch/node-oauth-shim\n\t\toauth_proxy: 'https://auth-server.herokuapp.com/proxy',\n\n\t\t// API timeout in milliseconds\n\t\ttimeout: 20000,\n\n\t\t// Default service / network\n\t\tdefault_service: null,\n\n\t\t// Force sign-in\n\t\t// When hello.login is fired, ignore current session expiry and continue with login\n\t\tforce: true,\n\n\t\t// Page URL\n\t\t// When 'display=page' this property defines where the users page should end up after redirect_uri\n\t\t// Ths could be problematic if the redirect_uri is indeed the final place,\n\t\t// Typically this circumvents the problem of the redirect_url being a dumb relay page.\n\t\tpage_uri: window.location.href\n\t},\n\n\t// Service configuration objects\n\tservices: {},\n\n\t// Use\n\t// Define a new instance of the HelloJS library with a default service\n\tuse: function(service) {\n\n\t\t// Create self, which inherits from its parent\n\t\tvar self = Object.create(this);\n\n\t\t// Inherit the prototype from its parent\n\t\tself.settings = Object.create(this.settings);\n\n\t\t// Define the default service\n\t\tif (service) {\n\t\t\tself.settings.default_service = service;\n\t\t}\n\n\t\t// Create an instance of Events\n\t\tself.utils.Event.call(self);\n\n\t\treturn self;\n\t},\n\n\t// Initialize\n\t// Define the client_ids for the endpoint services\n\t// @param object o, contains a key value pair, service => clientId\n\t// @param object opts, contains a key value pair of options used for defining the authentication defaults\n\t// @param number timeout, timeout in seconds\n\tinit: function(services, options) {\n\n\t\tvar utils = this.utils;\n\n\t\tif (!services) {\n\t\t\treturn this.services;\n\t\t}\n\n\t\t// Define provider credentials\n\t\t// Reformat the ID field\n\t\tfor (var x in services) {if (services.hasOwnProperty(x)) {\n\t\t\tif (typeof (services[x]) !== 'object') {\n\t\t\t\tservices[x] = {id: services[x]};\n\t\t\t}\n\t\t}}\n\n\t\t// Merge services if there already exists some\n\t\tutils.extend(this.services, services);\n\n\t\t// Format the incoming\n\t\tfor (x in this.services) {\n\t\t\tif (this.services.hasOwnProperty(x)) {\n\t\t\t\tthis.services[x].scope = this.services[x].scope || {};\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\t// Update the default settings with this one.\n\t\tif (options) {\n\t\t\tutils.extend(this.settings, options);\n\n\t\t\t// Do this immediatly incase the browser changes the current path.\n\t\t\tif ('redirect_uri' in options) {\n\t\t\t\tthis.settings.redirect_uri = utils.url(options.redirect_uri).href;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// Login\n\t// Using the endpoint\n\t// @param network stringify       name to connect to\n\t// @param options object    (optional)  {display mode, is either none|popup(default)|page, scope: email,birthday,publish, .. }\n\t// @param callback  function  (optional)  fired on signin\n\tlogin: function() {\n\n\t\t// Create an object which inherits its parent as the prototype and constructs a new event chain.\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\t\tvar promise = utils.Promise();\n\n\t\t// Get parameters\n\t\tvar p = utils.args({network: 's', options: 'o', callback: 'f'}, arguments);\n\n\t\t// Local vars\n\t\tvar url;\n\n\t\t// Merge/override options with app defaults\n\t\tvar opts = p.options = utils.merge(_this.settings, p.options || {});\n\n\t\t// Network\n\t\tp.network = p.network || _this.settings.default_service;\n\n\t\t// Bind callback to both reject and fulfill states\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.login auth'), emit.bind(this, 'auth.failed auth'));\n\n\t\t// Is our service valid?\n\t\tif (typeof (p.network) !== 'string' || !(p.network in _this.services)) {\n\t\t\t// Trigger the default login.\n\t\t\t// Ahh we dont have one.\n\t\t\treturn promise.reject(error('invalid_network', 'The provided network was not recognized'));\n\t\t}\n\n\t\tvar provider = _this.services[p.network];\n\n\t\t// Create a global listener to capture events triggered out of scope\n\t\tvar callbackId = utils.globalEvent(function(str) {\n\n\t\t\t// The responseHandler returns a string, lets save this locally\n\t\t\tvar obj;\n\n\t\t\tif (str) {\n\t\t\t\tobj = JSON.parse(str);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobj = error('cancelled', 'The authentication was not completed');\n\t\t\t}\n\n\t\t\t// Handle these response using the local\n\t\t\t// Trigger on the parent\n\t\t\tif (!obj.error) {\n\n\t\t\t\t// Save on the parent window the new credentials\n\t\t\t\t// This fixes an IE10 bug i think... atleast it does for me.\n\t\t\t\tutils.store(obj.network, obj);\n\n\t\t\t\t// Fulfill a successful login\n\t\t\t\tpromise.fulfill({\n\t\t\t\t\tnetwork: obj.network,\n\t\t\t\t\tauthResponse: obj\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Reject a successful login\n\t\t\t\tpromise.reject(obj);\n\t\t\t}\n\t\t});\n\n\t\tvar redirectUri = utils.url(opts.redirect_uri).href;\n\n\t\t// May be a space-delimited list of multiple, complementary types\n\t\tvar responseType = provider.oauth.response_type || opts.response_type;\n\n\t\t// Fallback to token if the module hasn't defined a grant url\n\t\tif (/\\bcode\\b/.test(responseType) && !provider.oauth.grant) {\n\t\t\tresponseType = responseType.replace(/\\bcode\\b/, 'token');\n\t\t}\n\n\t\t// Query string parameters, we may pass our own arguments to form the querystring\n\t\tp.qs = {\n\t\t\tclient_id: encodeURIComponent(provider.id),\n\t\t\tresponse_type: encodeURIComponent(responseType),\n\t\t\tredirect_uri: encodeURIComponent(redirectUri),\n\t\t\tdisplay: opts.display,\n\t\t\tscope: 'basic',\n\t\t\tstate: {\n\t\t\t\tclient_id: provider.id,\n\t\t\t\tnetwork: p.network,\n\t\t\t\tdisplay: opts.display,\n\t\t\t\tcallback: callbackId,\n\t\t\t\tstate: opts.state,\n\t\t\t\tredirect_uri: redirectUri\n\t\t\t}\n\t\t};\n\n\t\t// Get current session for merging scopes, and for quick auth response\n\t\tvar session = utils.store(p.network);\n\n\t\t// Scopes (authentication permisions)\n\t\t// Convert any array, or falsy value to a string.\n\t\tvar scope = (opts.scope || '').toString();\n\n\t\tscope = (scope ? scope + ',' : '') + p.qs.scope;\n\n\t\t// Append scopes from a previous session.\n\t\t// This helps keep app credentials constant,\n\t\t// Avoiding having to keep tabs on what scopes are authorized\n\t\tif (session && 'scope' in session && typeof session.scope === \"string\") {\n\t\t\tscope += ',' + session.scope;\n\t\t}\n\n\t\t// Save in the State\n\t\t// Convert to a string because IE, has a problem moving Arrays between windows\n    var pQsStateScopeArray = utils.unique(scope.split(/[,\\s]+/));\n    p.qs.state.scope = pQsStateScopeArray.join(',');\n\n\t\t// Map replace each scope with the providers default scopes\n\t\tp.qs.scope = scope.replace(/[^,\\s]+/ig, function(m) {\n\t\t\t// Does this have a mapping?\n\t\t\tif (m in provider.scope) {\n\t\t\t\treturn provider.scope[m];\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Loop through all services and determine whether the scope is generic\n\t\t\t\tfor (var x in _this.services) {\n\t\t\t\t\tvar serviceScopes = _this.services[x].scope;\n\t\t\t\t\tif (serviceScopes && m in serviceScopes) {\n\t\t\t\t\t\t// Found an instance of this scope, so lets not assume its special\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// This is a unique scope to this service so lets in it.\n\t\t\t\treturn m;\n\t\t\t}\n\n\t\t}).replace(/[,\\s]+/ig, ',');\n\n\t\t// Remove duplication and empty spaces\n\t\tp.qs.scope = utils.unique(p.qs.scope.split(/,+/)).join(provider.scope_delim || ',');\n\n\t\t// Is the user already signed in with the appropriate scopes, valid access_token?\n\t\tif (opts.force === false) {\n\t\t\tif (session && 'access_token' in session && session.access_token && 'expires' in session && session.expires > (Date.now() / 1000)) {\n\t\t\t\t// What is different about the scopes in the session vs the scopes in the new login?\n        var diff = utils.diff(session.scope || [], pQsStateScopeArray);\n\t\t\t\tif (diff.length === 0) {\n\t\t\t\t\t// OK trigger the callback\n\t\t\t\t\tpromise.fulfill({\n\t\t\t\t\t\tunchanged: true,\n\t\t\t\t\t\tnetwork: p.network,\n\t\t\t\t\t\tauthResponse: session\n\t\t\t\t\t});\n\n\t\t\t\t\t// Nothing has changed\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Page URL\n\t\tif (opts.display === 'page' && opts.page_uri) {\n\t\t\t// Add a page location, place to endup after session has authenticated\n\t\t\tp.qs.state.page_uri = utils.url(opts.page_uri).href;\n\t\t}\n\n\t\t// Bespoke\n\t\t// Override login querystrings from auth_options\n\t\tif ('login' in provider && typeof (provider.login) === 'function') {\n\t\t\t// Format the paramaters according to the providers formatting function\n\t\t\tprovider.login(p);\n\t\t}\n\n\t\t// Add OAuth to state\n\t\t// Where the service is going to take advantage of the oauth_proxy\n\t\tif (!/\\btoken\\b/.test(responseType) ||\n\t\tparseInt(provider.oauth.version, 10) < 2 ||\n\t\t(opts.display === 'none' && provider.oauth.grant && session && session.refresh_token)) {\n\n\t\t\t// Add the oauth endpoints\n\t\t\tp.qs.state.oauth = provider.oauth;\n\n\t\t\t// Add the proxy url\n\t\t\tp.qs.state.oauth_proxy = opts.oauth_proxy;\n\n\t\t}\n\n\t\t// Convert state to a string\n\t\tp.qs.state = encodeURIComponent(JSON.stringify(p.qs.state));\n\n\t\t// URL\n\t\tif (parseInt(provider.oauth.version, 10) === 1) {\n\n\t\t\t// Turn the request to the OAuth Proxy for 3-legged auth\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Refresh token\n\t\telse if (opts.display === 'none' && provider.oauth.grant && session && session.refresh_token) {\n\n\t\t\t// Add the refresh_token to the request\n\t\t\tp.qs.refresh_token = session.refresh_token;\n\n\t\t\t// Define the request path\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\t\telse {\n\t\t\turl = utils.qs(provider.oauth.auth, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Execute\n\t\t// Trigger how we want self displayed\n\t\tif (opts.display === 'none') {\n\t\t\t// Sign-in in the background, iframe\n\t\t\tutils.iframe(url);\n\t\t}\n\n\t\t// Triggering popup?\n\t\telse if (opts.display === 'popup') {\n\n\t\t\tvar popup = utils.popup(url, redirectUri, opts.window_width || 500, opts.window_height || 550);\n\n\t\t\tvar timer = setInterval(function() {\n\t\t\t\tif (!popup || popup.closed) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tif (!promise.state) {\n\n\t\t\t\t\t\tvar response = error('cancelled', 'Login has been cancelled');\n\n\t\t\t\t\t\tif (!popup) {\n\t\t\t\t\t\t\tresponse = error('blocked', 'Popup was blocked');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresponse.network = p.network;\n\n\t\t\t\t\t\tpromise.reject(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\telse {\n\t\t\twindow.location = url;\n\t\t}\n\n\t\treturn promise.proxy;\n\n\t\tfunction encodeFunction(s) {return s;}\n\t},\n\n\t// Remove any data associated with a given service\n\t// @param string name of the service\n\t// @param function callback\n\tlogout: function() {\n\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\n\t\t// Create a new promise\n\t\tvar promise = utils.Promise();\n\n\t\tvar p = utils.args({name:'s', options: 'o', callback: 'f'}, arguments);\n\n\t\tp.options = p.options || {};\n\n\t\t// Add callback to events\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.logout auth'), emit.bind(this, 'error'));\n\n\t\t// Network\n\t\tp.name = p.name || this.settings.default_service;\n\n\t\tif (p.name && !(p.name in _this.services)) {\n\n\t\t\tpromise.reject(error('invalid_network', 'The network was unrecognized'));\n\n\t\t}\n\t\telse if (p.name && utils.store(p.name)) {\n\n\t\t\t// Define the callback\n\t\t\tvar callback = function(opts) {\n\n\t\t\t\t// Remove from the store\n\t\t\t\tutils.store(p.name, '');\n\n\t\t\t\t// Emit events by default\n\t\t\t\tpromise.fulfill(hello.utils.merge({network:p.name}, opts || {}));\n\t\t\t};\n\n\t\t\t// Run an async operation to remove the users session\n\t\t\tvar _opts = {};\n\t\t\tif (p.options.force) {\n\t\t\t\tvar logout = _this.services[p.name].logout;\n\t\t\t\tif (logout) {\n\t\t\t\t\t// Convert logout to URL string,\n\t\t\t\t\t// If no string is returned, then this function will handle the logout async style\n\t\t\t\t\tif (typeof (logout) === 'function') {\n\t\t\t\t\t\tlogout = logout(callback);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If logout is a string then assume URL and open in iframe.\n\t\t\t\t\tif (typeof (logout) === 'string') {\n\t\t\t\t\t\tutils.iframe(logout);\n\t\t\t\t\t\t_opts.force = null;\n\t\t\t\t\t\t_opts.message = 'Logout success on providers site was indeterminate';\n\t\t\t\t\t}\n\t\t\t\t\telse if (logout === undefined) {\n\t\t\t\t\t\t// The callback function will handle the response.\n\t\t\t\t\t\treturn promise.proxy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove local credentials\n\t\t\tcallback(_opts);\n\t\t}\n\t\telse {\n\t\t\tpromise.reject(error('invalid_session', 'There was no session to remove'));\n\t\t}\n\n\t\treturn promise.proxy;\n\t},\n\n\t// Returns all the sessions that are subscribed too\n\t// @param string optional, name of the service to get information about.\n\tgetAuthResponse: function(service) {\n\n\t\t// If the service doesn't exist\n\t\tservice = service || this.settings.default_service;\n\n\t\tif (!service || !(service in this.services)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.utils.store(service) || null;\n\t},\n\n\t// Events: placeholder for the events\n\tevents: {}\n});\n\n// Core utilities\nhello.utils.extend(hello.utils, {\n\n\t// Error\n\terror: function(code, message) {\n\t\treturn {\n\t\t\terror: {\n\t\t\t\tcode: code,\n\t\t\t\tmessage: message\n\t\t\t}\n\t\t};\n\t},\n\n\t// Append the querystring to a url\n\t// @param string url\n\t// @param object parameters\n\tqs: function(url, params, formatFunction) {\n\t\tif (params) {\n\t\t\tvar reg;\n\t\t\tfor (var x in params) {\n\t\t\t\tif (url.indexOf(x) > -1) {\n\t\t\t\t\tvar str = '[\\\\?\\\\&]' + x + '=[^\\\\&]*';\n\t\t\t\t\treg = new RegExp(str);\n\t\t\t\t\turl = url.replace(reg, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn url + (!this.isEmpty(params) ? (url.indexOf('?') > -1 ? '&' : '?') + this.param(params, formatFunction) : '');\n\t},\n\n\t// Param\n\t// Explode/encode the parameters of an URL string/object\n\t// @param string s, string to decode\n\tparam: function(s, formatFunction) {\n\t\tvar b;\n\t\tvar a = {};\n\t\tvar m;\n\n\t\tif (typeof (s) === 'string') {\n\n\t\t\tformatFunction = formatFunction || decodeURIComponent;\n\n\t\t\tm = s.replace(/^[\\#\\?]/, '').match(/([^=\\/\\&]+)=([^\\&]+)/g);\n\t\t\tif (m) {\n\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\tb = m[i].match(/([^=]+)=(.*)/);\n\t\t\t\t\ta[b[1]] = formatFunction(b[2]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\t\telse {\n\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\tvar o = s;\n\n\t\t\ta = [];\n\n\t\t\tfor (var x in o) {if (o.hasOwnProperty(x)) {\n\t\t\t\tif (o.hasOwnProperty(x)) {\n\t\t\t\t\ta.push([x, o[x] === '?' ? '?' : formatFunction(o[x])].join('='));\n\t\t\t\t}\n\t\t\t}}\n\n\t\t\treturn a.join('&');\n\t\t}\n\t},\n\n\t// Local storage facade\n\tstore: (function(localStorage) {\n\n\t\tvar a = [localStorage, window.sessionStorage];\n\t\tvar i = 0;\n\n\t\t// Set LocalStorage\n\t\tlocalStorage = a[i++];\n\n\t\twhile (localStorage) {\n\t\t\ttry {\n\t\t\t\tlocalStorage.setItem(i, i);\n\t\t\t\tlocalStorage.removeItem(i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tlocalStorage = a[i++];\n\t\t\t}\n\t\t}\n\n\t\tif (!localStorage) {\n\t\t\tlocalStorage = {\n\t\t\t\tgetItem: function(prop) {\n\t\t\t\t\tprop = prop + '=';\n\t\t\t\t\tvar m = document.cookie.split(';');\n\t\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\t\tvar _m = m[i].replace(/(^\\s+|\\s+$)/, '');\n\t\t\t\t\t\tif (_m && _m.indexOf(prop) === 0) {\n\t\t\t\t\t\t\treturn _m.substr(prop.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\n\t\t\t\tsetItem: function(prop, value) {\n\t\t\t\t\tdocument.cookie = prop + '=' + value;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tfunction get() {\n\t\t\tvar json = {};\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(localStorage.getItem('hello')) || {};\n\t\t\t}\n\t\t\tcatch (e) {}\n\n\t\t\treturn json;\n\t\t}\n\n\t\tfunction set(json) {\n\t\t\tlocalStorage.setItem('hello', JSON.stringify(json));\n\t\t}\n\n\t\t// Check if the browser support local storage\n\t\treturn function(name, value, days) {\n\n\t\t\t// Local storage\n\t\t\tvar json = get();\n\n\t\t\tif (name && value === undefined) {\n\t\t\t\treturn json[name] || null;\n\t\t\t}\n\t\t\telse if (name && value === null) {\n\t\t\t\ttry {\n\t\t\t\t\tdelete json[name];\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tjson[name] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (name) {\n\t\t\t\tjson[name] = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn json;\n\t\t\t}\n\n\t\t\tset(json);\n\n\t\t\treturn json || null;\n\t\t};\n\n\t})(window.localStorage),\n\n\t// Create and Append new DOM elements\n\t// @param node string\n\t// @param attr object literal\n\t// @param dom/string\n\tappend: function(node, attr, target) {\n\n\t\tvar n = typeof (node) === 'string' ? document.createElement(node) : node;\n\n\t\tif (typeof (attr) === 'object') {\n\t\t\tif ('tagName' in attr) {\n\t\t\t\ttarget = attr;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var x in attr) {if (attr.hasOwnProperty(x)) {\n\t\t\t\t\tif (typeof (attr[x]) === 'object') {\n\t\t\t\t\t\tfor (var y in attr[x]) {if (attr[x].hasOwnProperty(y)) {\n\t\t\t\t\t\t\tn[x][y] = attr[x][y];\n\t\t\t\t\t\t}}\n\t\t\t\t\t}\n\t\t\t\t\telse if (x === 'html') {\n\t\t\t\t\t\tn.innerHTML = attr[x];\n\t\t\t\t\t}\n\n\t\t\t\t\t// IE doesn't like us setting methods with setAttribute\n\t\t\t\t\telse if (!/^on/.test(x)) {\n\t\t\t\t\t\tn.setAttribute(x, attr[x]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tn[x] = attr[x];\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t}\n\t\t}\n\n\t\tif (target === 'body') {\n\t\t\t(function self() {\n\t\t\t\tif (document.body) {\n\t\t\t\t\tdocument.body.appendChild(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetTimeout(self, 16);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t\telse if (typeof (target) === 'object') {\n\t\t\ttarget.appendChild(n);\n\t\t}\n\t\telse if (typeof (target) === 'string') {\n\t\t\tdocument.getElementsByTagName(target)[0].appendChild(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// An easy way to create a hidden iframe\n\t// @param string src\n\tiframe: function(src) {\n\t\tthis.append('iframe', {src: src, style: {position:'absolute', left: '-1000px', bottom: 0, height: '1px', width: '1px'}}, 'body');\n\t},\n\n\t// Recursive merge two objects into one, second parameter overides the first\n\t// @param a array\n\tmerge: function(/* Args: a, b, c, .. n */) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift({});\n\t\treturn this.extend.apply(null, args);\n\t},\n\n\t// Makes it easier to assign parameters, where some are optional\n\t// @param o object\n\t// @param a arguments\n\targs: function(o, args) {\n\n\t\tvar p = {};\n\t\tvar i = 0;\n\t\tvar t = null;\n\t\tvar x = null;\n\n\t\t// 'x' is the first key in the list of object parameters\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\t\t\tbreak;\n\t\t}}\n\n\t\t// Passing in hash object of arguments?\n\t\t// Where the first argument can't be an object\n\t\tif ((args.length === 1) && (typeof (args[0]) === 'object') && o[x] != 'o!') {\n\n\t\t\t// Could this object still belong to a property?\n\t\t\t// Check the object keys if they match any of the property keys\n\t\t\tfor (x in args[0]) {if (o.hasOwnProperty(x)) {\n\t\t\t\t// Does this key exist in the property list?\n\t\t\t\tif (x in o) {\n\t\t\t\t\t// Yes this key does exist so its most likely this function has been invoked with an object parameter\n\t\t\t\t\t// Return first argument as the hash of all arguments\n\t\t\t\t\treturn args[0];\n\t\t\t\t}\n\t\t\t}}\n\t\t}\n\n\t\t// Else loop through and account for the missing ones.\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\n\t\t\tt = typeof (args[i]);\n\n\t\t\tif ((typeof (o[x]) === 'function' && o[x].test(args[i])) || (typeof (o[x]) === 'string' && (\n\t\t\t(o[x].indexOf('s') > -1 && t === 'string') ||\n\t\t\t(o[x].indexOf('o') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('i') > -1 && t === 'number') ||\n\t\t\t(o[x].indexOf('a') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('f') > -1 && t === 'function')\n\t\t\t))\n\t\t\t) {\n\t\t\t\tp[x] = args[i++];\n\t\t\t}\n\n\t\t\telse if (typeof (o[x]) === 'string' && o[x].indexOf('!') > -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}}\n\n\t\treturn p;\n\t},\n\n\t// Returns a URL instance\n\turl: function(path) {\n\n\t\t// If the path is empty\n\t\tif (!path) {\n\t\t\treturn window.location;\n\t\t}\n\n\t\t// Chrome and FireFox support new URL() to extract URL objects\n\t\telse if (window.URL && URL instanceof Function && URL.length !== 0) {\n\t\t\treturn new URL(path, window.location);\n\t\t}\n\n\t\t// Ugly shim, it works!\n\t\telse {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.href = path;\n\t\t\treturn a;\n\t\t}\n\t},\n\n\tdiff: function(a, b) {\n\t\treturn b.filter(function(item) {\n\t\t\treturn a.indexOf(item) === -1;\n\t\t});\n\t},\n\n\t// Unique\n\t// Remove duplicate and null values from an array\n\t// @param a array\n\tunique: function(a) {\n\t\tif (!Array.isArray(a)) { return []; }\n\n\t\treturn a.filter(function(item, index) {\n\t\t\t// Is this the first location of item\n\t\t\treturn a.indexOf(item) === index;\n\t\t});\n\t},\n\n\tisEmpty: function(obj) {\n\n\t\t// Scalar\n\t\tif (!obj)\n\t\t\treturn true;\n\n\t\t// Array\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn !obj.length;\n\t\t}\n\t\telse if (typeof (obj) === 'object') {\n\t\t\t// Object\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t//jscs:disable\n\n\t/*!\n\t **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable\n\t **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>\n\t **  Licensed under The MIT License <http://opensource.org/licenses/MIT>\n\t **  Source-Code distributed on <http://github.com/rse/thenable>\n\t */\n\tPromise: (function(){\n\t\t/*  promise states [Promises/A+ 2.1]  */\n\t\tvar STATE_PENDING   = 0;                                         /*  [Promises/A+ 2.1.1]  */\n\t\tvar STATE_FULFILLED = 1;                                         /*  [Promises/A+ 2.1.2]  */\n\t\tvar STATE_REJECTED  = 2;                                         /*  [Promises/A+ 2.1.3]  */\n\n\t\t/*  promise object constructor  */\n\t\tvar api = function (executor) {\n\t\t\t/*  optionally support non-constructor/plain-function call  */\n\t\t\tif (!(this instanceof api))\n\t\t\t\treturn new api(executor);\n\n\t\t\t/*  initialize object  */\n\t\t\tthis.id           = \"Thenable/1.0.6\";\n\t\t\tthis.state        = STATE_PENDING; /*  initial state  */\n\t\t\tthis.fulfillValue = undefined;     /*  initial value  */     /*  [Promises/A+ 1.3, 2.1.2.2]  */\n\t\t\tthis.rejectReason = undefined;     /*  initial reason */     /*  [Promises/A+ 1.5, 2.1.3.2]  */\n\t\t\tthis.onFulfilled  = [];            /*  initial handlers  */\n\t\t\tthis.onRejected   = [];            /*  initial handlers  */\n\n\t\t\t/*  provide optional information-hiding proxy  */\n\t\t\tthis.proxy = {\n\t\t\t\tthen: this.then.bind(this)\n\t\t\t};\n\n\t\t\t/*  support optional executor function  */\n\t\t\tif (typeof executor === \"function\")\n\t\t\t\texecutor.call(this, this.fulfill.bind(this), this.reject.bind(this));\n\t\t};\n\n\t\t/*  promise API methods  */\n\t\tapi.prototype = {\n\t\t\t/*  promise resolving methods  */\n\t\t\tfulfill: function (value) { return deliver(this, STATE_FULFILLED, \"fulfillValue\", value); },\n\t\t\treject:  function (value) { return deliver(this, STATE_REJECTED,  \"rejectReason\", value); },\n\n\t\t\t/*  \"The then Method\" [Promises/A+ 1.1, 1.2, 2.2]  */\n\t\t\tthen: function (onFulfilled, onRejected) {\n\t\t\t\tvar curr = this;\n\t\t\t\tvar next = new api();                                    /*  [Promises/A+ 2.2.7]  */\n\t\t\t\tcurr.onFulfilled.push(\n\t\t\t\t\tresolver(onFulfilled, next, \"fulfill\"));             /*  [Promises/A+ 2.2.2/2.2.6]  */\n\t\t\t\tcurr.onRejected.push(\n\t\t\t\t\tresolver(onRejected,  next, \"reject\" ));             /*  [Promises/A+ 2.2.3/2.2.6]  */\n\t\t\t\texecute(curr);\n\t\t\t\treturn next.proxy;                                       /*  [Promises/A+ 2.2.7, 3.3]  */\n\t\t\t}\n\t\t};\n\n\t\t/*  deliver an action  */\n\t\tvar deliver = function (curr, state, name, value) {\n\t\t\tif (curr.state === STATE_PENDING) {\n\t\t\t\tcurr.state = state;                                      /*  [Promises/A+ 2.1.2.1, 2.1.3.1]  */\n\t\t\t\tcurr[name] = value;                                      /*  [Promises/A+ 2.1.2.2, 2.1.3.2]  */\n\t\t\t\texecute(curr);\n\t\t\t}\n\t\t\treturn curr;\n\t\t};\n\n\t\t/*  execute all handlers  */\n\t\tvar execute = function (curr) {\n\t\t\tif (curr.state === STATE_FULFILLED)\n\t\t\t\texecute_handlers(curr, \"onFulfilled\", curr.fulfillValue);\n\t\t\telse if (curr.state === STATE_REJECTED)\n\t\t\t\texecute_handlers(curr, \"onRejected\",  curr.rejectReason);\n\t\t};\n\n\t\t/*  execute particular set of handlers  */\n\t\tvar execute_handlers = function (curr, name, value) {\n\t\t\t/* global process: true */\n\t\t\t/* global setImmediate: true */\n\t\t\t/* global setTimeout: true */\n\n\t\t\t/*  short-circuit processing  */\n\t\t\tif (curr[name].length === 0)\n\t\t\t\treturn;\n\n\t\t\t/*  iterate over all handlers, exactly once  */\n\t\t\tvar handlers = curr[name];\n\t\t\tcurr[name] = [];                                             /*  [Promises/A+ 2.2.2.3, 2.2.3.3]  */\n\t\t\tvar func = function () {\n\t\t\t\tfor (var i = 0; i < handlers.length; i++)\n\t\t\t\t\thandlers[i](value);                                  /*  [Promises/A+ 2.2.5]  */\n\t\t\t};\n\n\t\t\t/*  execute procedure asynchronously  */                     /*  [Promises/A+ 2.2.4, 3.1]  */\n\t\t\tif (typeof process === \"object\" && typeof process.nextTick === \"function\")\n\t\t\t\tprocess.nextTick(func);\n\t\t\telse if (typeof setImmediate === \"function\")\n\t\t\t\tsetImmediate(func);\n\t\t\telse\n\t\t\t\tsetTimeout(func, 0);\n\t\t};\n\n\t\t/*  generate a resolver function  */\n\t\tvar resolver = function (cb, next, method) {\n\t\t\treturn function (value) {\n\t\t\t\tif (typeof cb !== \"function\")                            /*  [Promises/A+ 2.2.1, 2.2.7.3, 2.2.7.4]  */\n\t\t\t\t\tnext[method].call(next, value);                      /*  [Promises/A+ 2.2.7.3, 2.2.7.4]  */\n\t\t\t\telse {\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry { result = cb(value); }                          /*  [Promises/A+ 2.2.2.1, 2.2.3.1, 2.2.5, 3.2]  */\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tnext.reject(e);                                  /*  [Promises/A+ 2.2.7.2]  */\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(next, result);                               /*  [Promises/A+ 2.2.7.1]  */\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\t/*  \"Promise Resolution Procedure\"  */                           /*  [Promises/A+ 2.3]  */\n\t\tvar resolve = function (promise, x) {\n\t\t\t/*  sanity check arguments  */                               /*  [Promises/A+ 2.3.1]  */\n\t\t\tif (promise === x || promise.proxy === x) {\n\t\t\t\tpromise.reject(new TypeError(\"cannot resolve promise with itself\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  surgically check for a \"then\" method\n\t\t\t\t(mainly to just call the \"getter\" of \"then\" only once)  */\n\t\t\tvar then;\n\t\t\tif ((typeof x === \"object\" && x !== null) || typeof x === \"function\") {\n\t\t\t\ttry { then = x.then; }                                   /*  [Promises/A+ 2.3.3.1, 3.5]  */\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e);                                   /*  [Promises/A+ 2.3.3.2]  */\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*  handle own Thenables    [Promises/A+ 2.3.2]\n\t\t\t\tand similar \"thenables\" [Promises/A+ 2.3.3]  */\n\t\t\tif (typeof then === \"function\") {\n\t\t\t\tvar resolved = false;\n\t\t\t\ttry {\n\t\t\t\t\t/*  call retrieved \"then\" method */                  /*  [Promises/A+ 2.3.3.3]  */\n\t\t\t\t\tthen.call(x,\n\t\t\t\t\t\t/*  resolvePromise  */                           /*  [Promises/A+ 2.3.3.3.1]  */\n\t\t\t\t\t\tfunction (y) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tif (y === x)                                 /*  [Promises/A+ 3.6]  */\n\t\t\t\t\t\t\t\tpromise.reject(new TypeError(\"circular thenable chain\"));\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresolve(promise, y);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t/*  rejectPromise  */                            /*  [Promises/A+ 2.3.3.3.2]  */\n\t\t\t\t\t\tfunction (r) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tpromise.reject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (!resolved)                                       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\tpromise.reject(e);                               /*  [Promises/A+ 2.3.3.3.4]  */\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  handle other values  */\n\t\t\tpromise.fulfill(x);                                          /*  [Promises/A+ 2.3.4, 2.3.3.4]  */\n\t\t};\n\n\t\t/*  export API  */\n\t\treturn api;\n\t})(),\n\n\t//jscs:enable\n\n\t// Event\n\t// A contructor superclass for adding event menthods, on, off, emit.\n\tEvent: function() {\n\n\t\tvar separator = /[\\s\\,]+/;\n\n\t\t// If this doesn't support getPrototype then we can't get prototype.events of the parent\n\t\t// So lets get the current instance events, and add those to a parent property\n\t\tthis.parent = {\n\t\t\tevents: this.events,\n\t\t\tfindEvents: this.findEvents,\n\t\t\tparent: this.parent,\n\t\t\tutils: this.utils\n\t\t};\n\n\t\tthis.events = {};\n\n\t\t// On, subscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.on = function(evt, callback) {\n\n\t\t\tif (callback && typeof (callback) === 'function') {\n\t\t\t\tvar a = evt.split(separator);\n\t\t\t\tfor (var i = 0; i < a.length; i++) {\n\n\t\t\t\t\t// Has this event already been fired on this instance?\n\t\t\t\t\tthis.events[a[i]] = [callback].concat(this.events[a[i]] || []);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Off, unsubscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.off = function(evt, callback) {\n\n\t\t\tthis.findEvents(evt, function(name, index) {\n\t\t\t\tif (!callback || this.events[name][index] === callback) {\n\t\t\t\t\tthis.events[name][index] = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Emit\n\t\t// Triggers any subscribed events\n\t\tthis.emit = function(evt /*, data, ... */) {\n\n\t\t\t// Get arguments as an Array, knock off the first one\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\t\targs.push(evt);\n\n\t\t\t// Handler\n\t\t\tvar handler = function(name, index) {\n\n\t\t\t\t// Replace the last property with the event name\n\t\t\t\targs[args.length - 1] = (name === '*' ? evt : name);\n\n\t\t\t\t// Trigger\n\t\t\t\tthis.events[name][index].apply(this, args);\n\t\t\t};\n\n\t\t\t// Find the callbacks which match the condition and call\n\t\t\tvar _this = this;\n\t\t\twhile (_this && _this.findEvents) {\n\n\t\t\t\t// Find events which match\n\t\t\t\t_this.findEvents(evt + ',*', handler);\n\t\t\t\t_this = _this.parent;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t//\n\t\t// Easy functions\n\t\tthis.emitAfter = function() {\n\t\t\tvar _this = this;\n\t\t\tvar args = arguments;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.emit.apply(_this, args);\n\t\t\t}, 0);\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.findEvents = function(evt, callback) {\n\n\t\t\tvar a = evt.split(separator);\n\n\t\t\tfor (var name in this.events) {if (this.events.hasOwnProperty(name)) {\n\n\t\t\t\tif (a.indexOf(name) > -1) {\n\n\t\t\t\t\tfor (var i = 0; i < this.events[name].length; i++) {\n\n\t\t\t\t\t\t// Does the event handler exist?\n\t\t\t\t\t\tif (this.events[name][i]) {\n\t\t\t\t\t\t\t// Emit on the local instance of this\n\t\t\t\t\t\t\tcallback.call(this, name, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t};\n\n\t\treturn this;\n\t},\n\n\t// Global Events\n\t// Attach the callback to the window object\n\t// Return its unique reference\n\tglobalEvent: function(callback, guid) {\n\t\t// If the guid has not been supplied then create a new one.\n\t\tguid = guid || '_hellojs_' + parseInt(Math.random() * 1e12, 10).toString(36);\n\n\t\t// Define the callback function\n\t\twindow[guid] = function() {\n\t\t\t// Trigger the callback\n\t\t\ttry {\n\t\t\t\tbool = callback.apply(this, arguments);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\n\t\t\tif (bool) {\n\t\t\t\t// Remove this handler reference\n\t\t\t\ttry {\n\t\t\t\t\tdelete window[guid];\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\t\t\t}\n\t\t};\n\n\t\treturn guid;\n\t},\n\n\t// Trigger a clientside popup\n\t// This has been augmented to support PhoneGap\n\tpopup: function(url, redirectUri, windowWidth, windowHeight) {\n\n\t\tvar documentElement = document.documentElement;\n\n\t\t// Multi Screen Popup Positioning (http://stackoverflow.com/a/16861050)\n\t\t// Credit: http://www.xtf.dk/2011/08/center-new-popup-window-even-on.html\n\t\t// Fixes dual-screen position                         Most browsers      Firefox\n\t\tvar dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left;\n\t\tvar dualScreenTop = window.screenTop !== undefined ? window.screenTop : screen.top;\n\n\t\tvar width = window.innerWidth || documentElement.clientWidth || screen.width;\n\t\tvar height = window.innerHeight || documentElement.clientHeight || screen.height;\n\n\t\tvar left = ((width - windowWidth) / 2) + dualScreenLeft;\n\t\tvar top = ((height - windowHeight) / 2) + dualScreenTop;\n\n\t\t// Create a function for reopening the popup, and assigning events to the new popup object\n\t\t// This is a fix whereby triggering the\n\t\tvar open = function(url) {\n\n\t\t\t// Trigger callback\n\t\t\tvar popup = window.open(\n\t\t\t\turl,\n\t\t\t\t'_blank',\n\t\t\t\t'resizeable=true,height=' + windowHeight + ',width=' + windowWidth + ',left=' + left + ',top=' + top\n\t\t\t);\n\n\t\t\t// PhoneGap support\n\t\t\t// Add an event listener to listen to the change in the popup windows URL\n\t\t\t// This must appear before popup.focus();\n\t\t\tif (popup && popup.addEventListener) {\n\n\t\t\t\t// Get the origin of the redirect URI\n\n\t\t\t\tvar a = hello.utils.url(redirectUri);\n\t\t\t\tvar redirectUriOrigin = a.origin || (a.protocol + '//' + a.hostname);\n\n\t\t\t\t// Listen to changes in the InAppBrowser window\n\n\t\t\t\tpopup.addEventListener('loadstart', function(e) {\n\n\t\t\t\t\tvar url = e.url;\n\n\t\t\t\t\t// Is this the path, as given by the redirectUri?\n\t\t\t\t\t// Check the new URL agains the redirectUriOrigin.\n\t\t\t\t\t// According to #63 a user could click 'cancel' in some dialog boxes ....\n\t\t\t\t\t// The popup redirects to another page with the same origin, yet we still wish it to close.\n\n\t\t\t\t\tif (url.indexOf(redirectUriOrigin) !== 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split appart the URL\n\t\t\t\t\tvar a = hello.utils.url(url);\n\n\t\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\t\t// The location can be augmented in to a location object like so...\n\n\t\t\t\t\tvar _popup = {\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\t\tassign: function(location) {\n\n\t\t\t\t\t\t\t\t// Unfourtunatly an app is may not change the location of a InAppBrowser window.\n\t\t\t\t\t\t\t\t// So to shim this, just open a new one.\n\n\t\t\t\t\t\t\t\tpopup.addEventListener('exit', function() {\n\n\t\t\t\t\t\t\t\t\t// For some reason its failing to close the window if a new window opens too soon.\n\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t\topen(location);\n\t\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\t\thref: a.href\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclose: function() {\n\t\t\t\t\t\t\tif (popup.close) {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t\t// URL string\n\t\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\t\thello.utils.responseHandler(_popup, window);\n\n\t\t\t\t\t// Always close the popup regardless of whether the hello.utils.responseHandler detects a state parameter or not in the querystring.\n\t\t\t\t\t// Such situations might arise such as those in #63\n\n\t\t\t\t\t_popup.close();\n\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (popup && popup.focus) {\n\t\t\t\tpopup.focus();\n\t\t\t}\n\n\t\t\treturn popup;\n\t\t};\n\n\t\t// Call the open() function with the initial path\n\t\t//\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\t//\n\t\t// Firefox  decodes URL fragments when calling location.hash.\n\t\t//  - This is bad if the value contains break points which are escaped\n\t\t//  - Hence the url must be encoded twice as it contains breakpoints.\n\t\tif (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {\n\t\t\turl = redirectUri + '#oauth_redirect=' + encodeURIComponent(encodeURIComponent(url));\n\t\t}\n\n\t\treturn open(url);\n\t},\n\n\t// OAuth and API response handler\n\tresponseHandler: function(window, parent) {\n\n\t\tvar _this = this;\n\t\tvar p;\n\t\tvar location = window.location;\n\n\t\t// Is this an auth relay message which needs to call the proxy?\n\t\tp = _this.param(location.search);\n\n\t\t// OAuth2 or OAuth1 server response?\n\t\tif (p && ((p.code && p.state) || (p.oauth_token && p.proxy_url))) {\n\n\t\t\tvar state = JSON.parse(p.state);\n\n\t\t\t// Add this path as the redirect_uri\n\t\t\tp.redirect_uri = state.redirect_uri || location.href.replace(/[\\?\\#].*$/, '');\n\n\t\t\t// Redirect to the host\n\t\t\tvar path = (state.oauth_proxy || p.proxy_url) + '?' + _this.param(p);\n\n\t\t\tlocation.assign(path);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Save session, from redirected authentication\n\t\t// #access_token has come in?\n\t\t//\n\t\t// FACEBOOK is returning auth errors within as a query_string... thats a stickler for consistency.\n\t\t// SoundCloud is the state in the querystring and the token in the hashtag, so we'll mix the two together\n\n\t\tp = _this.merge(_this.param(location.search || ''), _this.param(location.hash || ''));\n\n\t\t// If p.state\n\t\tif (p && 'state' in p) {\n\n\t\t\t// Remove any addition information\n\t\t\t// E.g. p.state = 'facebook.page';\n\t\t\ttry {\n\t\t\t\tvar a = JSON.parse(p.state);\n\t\t\t\t_this.extend(p, a);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error('Could not decode state parameter');\n\t\t\t}\n\n\t\t\t// Access_token?\n\t\t\tif (('access_token' in p && p.access_token) && p.network) {\n        // github token never expires\n        // If p.expires_in is unset, set to 0\n        var expiresIn = p.network === \"github\" ? null : p.expires_in;\n        var parsedExpiresIn = expiresIn == null ? 0 : parseInt(expiresIn, 10);\n\t\t\t\tp.expires = (Date.now() / 1000) + (parsedExpiresIn === 0 ? (60 * 60 * 24 * 365) : parsedExpiresIn);\n\n\t\t\t\t// Lets use the \"state\" to assign it to one of our networks\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// Error=?\n\t\t\t// &error_description=?\n\t\t\t// &state=?\n\t\t\telse if (('error' in p && p.error) && p.network) {\n\n\t\t\t\tp.error = {\n\t\t\t\t\tcode: p.error,\n\t\t\t\t\tmessage: p.error_message || p.error_description\n\t\t\t\t};\n\n\t\t\t\t// Let the state handler handle it\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// API call, or a cancelled login\n\t\t\t// Result is serialized JSON string\n\t\t\telse if (p.callback && p.callback in parent) {\n\n\t\t\t\t// Trigger a function in the parent\n\t\t\t\tvar res = 'result' in p && p.result ? JSON.parse(p.result) : false;\n\n\t\t\t\t// Trigger the callback on the parent\n\t\t\t\tparent[p.callback](res);\n\t\t\t\tcloseWindow();\n\t\t\t}\n\n\t\t\t// If this page is still open\n\t\t\tif (p.page_uri) {\n\t\t\t\tlocation.assign(p.page_uri);\n\t\t\t}\n\t\t}\n\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\telse if ('oauth_redirect' in p) {\n\n\t\t\tlocation.assign(decodeURIComponent(p.oauth_redirect));\n\t\t\treturn;\n\t\t}\n\n\t\t// Trigger a callback to authenticate\n\t\tfunction authCallback(obj, window, parent) {\n\n\t\t\t// Trigger the callback on the parent\n\t\t\t_this.store(obj.network, obj);\n\n\t\t\t// If this is a page request it has no parent or opener window to handle callbacks\n\t\t\tif (('display' in obj) && obj.display === 'page') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (parent) {\n\t\t\t\t// Call the generic listeners\n\t\t\t\t// Win.hello.emit(network+\":auth.\"+(obj.error?'failed':'login'), obj);\n\n\t\t\t\t// TODO: remove from session object\n\t\t\t\tvar cb = obj.callback;\n\t\t\t\ttry {\n\t\t\t\t\tdelete obj.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t_this.store(obj.network, obj);\n\n\t\t\t\t// Call the globalEvent function on the parent\n\t\t\t\tif (cb in parent) {\n\n\t\t\t\t\t// It's safer to pass back a string to the parent,\n\t\t\t\t\t// Rather than an object/array (better for IE8)\n\t\t\t\t\tvar str = JSON.stringify(obj);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tparent[cb](str);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\t// Error thrown whilst executing parent callback\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloseWindow();\n\t\t}\n\n\t\tfunction closeWindow() {\n\n\t\t\t// Close this current window\n\t\t\ttry {\n\t\t\t\twindow.close();\n\t\t\t}\n\t\t\tcatch (e) {}\n\n\t\t\t// IOS bug wont let us close a popup if still loading\n\t\t\tif (window.addEventListener) {\n\t\t\t\twindow.addEventListener('load', function() {\n\t\t\t\t\twindow.close();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n});\n\n// Events\n\n// Extend the hello object with its own event instance\nhello.utils.Event.call(hello);\n\n/////////////////////////////////////\n//\n// Save any access token that is in the current page URL\n// Handle any response solicited through iframe hash tag following an API request\n//\n/////////////////////////////////////\n\nhello.utils.responseHandler(window, window.opener || window.parent);\n\n///////////////////////////////////\n// Monitoring session state\n// Check for session changes\n///////////////////////////////////\n\n(function(hello) {\n\n\t// Monitor for a change in state and fire\n\tvar oldSessions = {};\n\n\t// Hash of expired tokens\n\tvar expired = {};\n\n\t// Listen to other triggers to Auth events, use these to update this\n\thello.on('auth.login, auth.logout', function(auth) {\n\t\tif (auth && typeof (auth) === 'object' && auth.network) {\n\t\t\toldSessions[auth.network] = hello.utils.store(auth.network) || {};\n\t\t}\n\t});\n\n\t(function self() {\n\n\t\tvar CURRENT_TIME = (Date.now() / 1000);\n\t\tvar emit = function(eventName) {\n\t\t\thello.emit('auth.' + eventName, {\n\t\t\t\tnetwork: name,\n\t\t\t\tauthResponse: session\n\t\t\t});\n\t\t};\n\n\t\t// Loop through the services\n\t\tfor (var name in hello.services) {if (hello.services.hasOwnProperty(name)) {\n\n\t\t\tif (!hello.services[name].id) {\n\t\t\t\t// We haven't attached an ID so dont listen.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Get session\n\t\t\tvar session = hello.utils.store(name) || {};\n\t\t\tvar provider = hello.services[name];\n\t\t\tvar oldSess = oldSessions[name] || {};\n\n\t\t\t// Listen for globalEvents that did not get triggered from the child\n\t\t\tif (session && 'callback' in session) {\n\n\t\t\t\t// To do remove from session object...\n\t\t\t\tvar cb = session.callback;\n\t\t\t\ttry {\n\t\t\t\t\tdelete session.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t// Removing the callback\n\t\t\t\thello.utils.store(name, session);\n\n\t\t\t\t// Emit global events\n\t\t\t\ttry {\n\t\t\t\t\twindow[cb](session);\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\t\t\t}\n\n\t\t\t// Refresh token\n\t\t\tif (session && ('expires' in session) && session.expires < CURRENT_TIME) {\n\n\t\t\t\t// If auto refresh is possible\n\t\t\t\t// Either the browser supports\n\t\t\t\tvar refresh = provider.refresh || session.refresh_token;\n\n\t\t\t\t// Has the refresh been run recently?\n\t\t\t\tif (refresh && (!(name in expired) || expired[name] < CURRENT_TIME)) {\n\t\t\t\t\t// Try to resignin\n\t\t\t\t\thello.emit('notice', name + ' has expired trying to resignin');\n\t\t\t\t\thello.login(name, {display: 'none', force: false});\n\n\t\t\t\t\t// Update expired, every 10 minutes\n\t\t\t\t\texpired[name] = CURRENT_TIME + 600;\n\t\t\t\t}\n\n\t\t\t\t// Does this provider not support refresh\n\t\t\t\telse if (!refresh && !(name in expired)) {\n\t\t\t\t\t// Label the event\n\t\t\t\t\temit('expired');\n\t\t\t\t\texpired[name] = true;\n\t\t\t\t}\n\n\t\t\t\t// If session has expired then we dont want to store its value until it can be established that its been updated\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Has session changed?\n\t\t\telse if (oldSess.access_token === session.access_token &&\n\t\t\toldSess.expires === session.expires) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Access_token has been removed\n\t\t\telse if (!session.access_token && oldSess.access_token) {\n\t\t\t\temit('logout');\n\t\t\t}\n\n\t\t\t// Access_token has been created\n\t\t\telse if (session.access_token && !oldSess.access_token) {\n\t\t\t\temit('login');\n\t\t\t}\n\n\t\t\t// Access_token has been updated\n\t\t\telse if (session.expires !== oldSess.expires) {\n\t\t\t\temit('update');\n\t\t\t}\n\n\t\t\t// Updated stored session\n\t\t\toldSessions[name] = session;\n\n\t\t\t// Remove the expired flags\n\t\t\tif (name in expired) {\n\t\t\t\tdelete expired[name];\n\t\t\t}\n\t\t}}\n\n\t\t// Check error events\n\t\tsetTimeout(self, 1000);\n\t})();\n\n})(hello);\n\n// EOF CORE lib\n//////////////////////////////////\n\n/////////////////////////////////////////\n// API\n// @param path    string\n// @param query   object (optional)\n// @param method  string (optional)\n// @param data    object (optional)\n// @param timeout integer (optional)\n// @param callback  function (optional)\n\nhello.api = function() {\n\n\t// Shorthand\n\tvar _this = this;\n\tvar utils = _this.utils;\n\tvar error = utils.error;\n\n\t// Construct a new Promise object\n\tvar promise = utils.Promise();\n\n\t// Arguments\n\tvar p = utils.args({path: 's!', query: 'o', method: 's', data: 'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t// Method\n\tp.method = (p.method || 'get').toLowerCase();\n\n\t// Headers\n\tp.headers = p.headers || {};\n\n\t// Query\n\tp.query = p.query || {};\n\n\t// If get, put all parameters into query\n\tif (p.method === 'get' || p.method === 'delete') {\n\t\tutils.extend(p.query, p.data);\n\t\tp.data = {};\n\t}\n\n\tvar data = p.data = p.data || {};\n\n\t// Completed event callback\n\tpromise.then(p.callback, p.callback);\n\n\t// Remove the network from path, e.g. facebook:/me/friends\n\t// Results in { network : facebook, path : me/friends }\n\tif (!p.path) {\n\t\treturn promise.reject(error('invalid_path', 'Missing the path parameter from the request'));\n\t}\n\n\tp.path = p.path.replace(/^\\/+/, '');\n\tvar a = (p.path.split(/[\\/\\:]/, 2) || [])[0].toLowerCase();\n\n\tif (a in _this.services) {\n\t\tp.network = a;\n\t\tvar reg = new RegExp('^' + a + ':?\\/?');\n\t\tp.path = p.path.replace(reg, '');\n\t}\n\n\t// Network & Provider\n\t// Define the network that this request is made for\n\tp.network = _this.settings.default_service = p.network || _this.settings.default_service;\n\tvar o = _this.services[p.network];\n\n\t// INVALID\n\t// Is there no service by the given network name?\n\tif (!o) {\n\t\treturn promise.reject(error('invalid_network', 'Could not match the service requested: ' + p.network));\n\t}\n\n\t// PATH\n\t// As long as the path isn't flagged as unavaiable, e.g. path == false\n\n\tif (!(!(p.method in o) || !(p.path in o[p.method]) || o[p.method][p.path] !== false)) {\n\t\treturn promise.reject(error('invalid_path', 'The provided path is not available on the selected network'));\n\t}\n\n\t// PROXY\n\t// OAuth1 calls always need a proxy\n\n\tif (!p.oauth_proxy) {\n\t\tp.oauth_proxy = _this.settings.oauth_proxy;\n\t}\n\n\tif (!('proxy' in p)) {\n\t\tp.proxy = p.oauth_proxy && o.oauth && parseInt(o.oauth.version, 10) === 1;\n\t}\n\n\t// TIMEOUT\n\t// Adopt timeout from global settings by default\n\n\tif (!('timeout' in p)) {\n\t\tp.timeout = _this.settings.timeout;\n\t}\n\n\t//\n\t// Get the current session\n\t// Append the access_token to the query\n\tvar session = _this.getAuthResponse(p.network);\n\tif (session && session.access_token) {\n\t\tp.query.access_token = session.access_token;\n\t}\n\n\tvar url = p.path;\n\tvar m;\n\n\t// Store the query as options\n\t// This is used to populate the request object before the data is augmented by the prewrap handlers.\n\tp.options = utils.clone(p.query);\n\n\t// Clone the data object\n\t// Prevent this script overwriting the data of the incoming object.\n\t// Ensure that everytime we run an iteration the callbacks haven't removed some data\n\tp.data = utils.clone(data);\n\n\t// URL Mapping\n\t// Is there a map for the given URL?\n\tvar actions = o[{'delete': 'del'}[p.method] || p.method] || {};\n\n\t// Extrapolate the QueryString\n\t// Provide a clean path\n\t// Move the querystring into the data\n\tif (p.method === 'get') {\n\n\t\tvar query = url.split(/[\\?#]/)[1];\n\t\tif (query) {\n\t\t\tutils.extend(p.query, utils.param(query));\n\n\t\t\t// Remove the query part from the URL\n\t\t\turl = url.replace(/\\?.*?(#|$)/, '$1');\n\t\t}\n\t}\n\n\t// Is the hash fragment defined\n\tif ((m = url.match(/#(.+)/, ''))) {\n\t\turl = url.split('#')[0];\n\t\tp.path = m[1];\n\t}\n\telse if (url in actions) {\n\t\tp.path = url;\n\t\turl = actions[url];\n\t}\n\telse if ('default' in actions) {\n\t\turl = actions['default'];\n\t}\n\n\t// Redirect Handler\n\t// This defines for the Form+Iframe+Hash hack where to return the results too.\n\tp.redirect_uri = _this.settings.redirect_uri;\n\n\t// Set OAuth settings\n\tp.oauth = o.oauth;\n\n\t// Define FormatHandler\n\t// The request can be procesed in a multitude of ways\n\t// Here's the options - depending on the browser and endpoint\n\tp.xhr = o.xhr;\n\tp.jsonp = o.jsonp;\n\tp.form = o.form;\n\n\t// Make request\n\tif (typeof (url) === 'function') {\n\t\t// Does self have its own callback?\n\t\turl(p, getPath);\n\t}\n\telse {\n\t\t// Else the URL is a string\n\t\tgetPath(url);\n\t}\n\n\treturn promise.proxy;\n\n\t// If url needs a base\n\t// Wrap everything in\n\tfunction getPath(url) {\n\n\t\t// Format the string if it needs it\n\t\turl = url.replace(/\\@\\{([a-z\\_\\-]+)(\\|.+?)?\\}/gi, function(m, key, defaults) {\n\t\t\tvar val = defaults ? defaults.replace(/^\\|/, '') : '';\n\t\t\tif (key in p.query) {\n\t\t\t\tval = p.query[key];\n\t\t\t\tdelete p.query[key];\n\t\t\t}\n\t\t\telse if (!defaults) {\n\t\t\t\tpromise.reject(error('missing_attribute', 'The attribute ' + key + ' is missing from the request'));\n\t\t\t}\n\n\t\t\treturn val;\n\t\t});\n\n\t\t// Add base\n\t\tif (!url.match(/^https?:\\/\\//)) {\n\t\t\turl = o.base + url;\n\t\t}\n\n\t\t// Define the request URL\n\t\tp.url = url;\n\n\t\t// Make the HTTP request with the curated request object\n\t\t// CALLBACK HANDLER\n\t\t// @ response object\n\t\t// @ statusCode integer if available\n\t\tutils.request(p, function(r, headers) {\n\n\t\t\t// Should this be an object\n\t\t\tif (r === true) {\n\t\t\t\tr = {success:true};\n\t\t\t}\n\t\t\telse if (!r) {\n\t\t\t\tr = {};\n\t\t\t}\n\n\t\t\t// The delete callback needs a better response\n\t\t\tif (p.method === 'delete') {\n\t\t\t\tr = (!r || utils.isEmpty(r)) ? {success:true} : r;\n\t\t\t}\n\n\t\t\t// FORMAT RESPONSE?\n\t\t\t// Does self request have a corresponding formatter\n\t\t\tif (o.wrap && ((p.path in o.wrap) || ('default' in o.wrap))) {\n\t\t\t\tvar wrap = (p.path in o.wrap ? p.path : 'default');\n\t\t\t\tvar time = Date.now();\n\n\t\t\t\t// FORMAT RESPONSE\n\t\t\t\tvar b = o.wrap[wrap](r, headers, p);\n\n\t\t\t\t// Has the response been utterly overwritten?\n\t\t\t\t// Typically self augments the existing object.. but for those rare occassions\n\t\t\t\tif (b) {\n\t\t\t\t\tr = b;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Is there a next_page defined in the response?\n\t\t\tif (r && 'paging' in r && r.paging.next) {\n\n\t\t\t\t// Add the relative path if it is missing from the paging/next path\n\t\t\t\tif (r.paging.next[0] === '?') {\n\t\t\t\t\tr.paging.next = p.path + r.paging.next;\n\t\t\t\t}\n\n\t\t\t\t// The relative path has been defined, lets markup the handler in the HashFragment\n\t\t\t\telse {\n\t\t\t\t\tr.paging.next += '#' + p.path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Dispatch to listeners\n\t\t\t// Emit events which pertain to the formatted response\n\t\t\tif (!r || 'error' in r) {\n\t\t\t\tpromise.reject(r);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpromise.fulfill(r);\n\t\t\t}\n\t\t});\n\t}\n};\n\n// API utilities\nhello.utils.extend(hello.utils, {\n\n\t// Make an HTTP request\n\trequest: function(p, callback) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// This has to go through a POST request\n\t\tif (!_this.isEmpty(p.data) && !('FileList' in window) && _this.hasBinary(p.data)) {\n\n\t\t\t// Disable XHR and JSONP\n\t\t\tp.xhr = false;\n\t\t\tp.jsonp = false;\n\t\t}\n\n\t\t// Check if the browser and service support CORS\n\t\tif (\n\t\t\t'withCredentials' in new XMLHttpRequest() &&\n\t\t\t(!('xhr' in p) || (p.xhr && (typeof (p.xhr) !== 'function' || p.xhr(p, p.query))))\n\t\t) {\n\n\t\t\tformatUrl(p, function(url) {\n\n\t\t\t\tvar x = _this.xhr(p.method, url, p.headers, p.data, callback);\n\t\t\t\tx.onprogress = p.onprogress || null;\n\n\t\t\t\t// Windows Phone does not support xhr.upload, see #74\n\t\t\t\t// Feature detect\n\t\t\t\tif (x.upload && p.onuploadprogress) {\n\t\t\t\t\tx.upload.onprogress = p.onuploadprogress;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the query object\n\t\t// Each request modifies the query object and needs to be tared after each one.\n\t\tvar _query = p.query;\n\n\t\tp.query = _this.clone(p.query);\n\n\t\t// Assign a new callbackID\n\t\tp.callbackID = _this.globalEvent();\n\n\t\t// JSONP\n\t\tif (p.jsonp !== false) {\n\n\t\t\t// Clone the query object\n\t\t\tp.query.callback = p.callbackID;\n\n\t\t\t// If the JSONP is a function then run it\n\t\t\tif (typeof (p.jsonp) === 'function') {\n\t\t\t\tp.jsonp(p, p.query);\n\t\t\t}\n\n\t\t\t// Lets use JSONP if the method is 'get'\n\t\t\tif (p.method === 'get') {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.jsonp(url, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// It's not compatible reset query\n\t\t\t\tp.query = _query;\n\t\t\t}\n\n\t\t}\n\n\t\t// Otherwise we're on to the old school, iframe hacks and JSONP\n\t\tif (p.form !== false) {\n\n\t\t\t// Add some additional query parameters to the URL\n\t\t\t// We're pretty stuffed if the endpoint doesn't like these\n\t\t\tp.query.redirect_uri = p.redirect_uri;\n\t\t\tp.query.state = JSON.stringify({callback:p.callbackID});\n\n\t\t\tvar opts;\n\n\t\t\tif (typeof (p.form) === 'function') {\n\n\t\t\t\t// Format the request\n\t\t\t\topts = p.form(p, p.query);\n\t\t\t}\n\n\t\t\tif (p.method === 'post' && opts !== false) {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.post(url, p.data, opts, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// None of the methods were successful throw an error\n\t\tcallback(error('invalid_request', 'There was no mechanism for handling this request'));\n\n\t\treturn;\n\n\t\t// Format URL\n\t\t// Constructs the request URL, optionally wraps the URL through a call to a proxy server\n\t\t// Returns the formatted URL\n\t\tfunction formatUrl(p, callback) {\n\n\t\t\t// Are we signing the request?\n\t\t\tvar sign;\n\n\t\t\t// OAuth1\n\t\t\t// Remove the token from the query before signing\n\t\t\tif (p.oauth && parseInt(p.oauth.version, 10) === 1) {\n\n\t\t\t\t// OAUTH SIGNING PROXY\n\t\t\t\tsign = p.query.access_token;\n\n\t\t\t\t// Remove the access_token\n\t\t\t\tdelete p.query.access_token;\n\n\t\t\t\t// Enfore use of Proxy\n\t\t\t\tp.proxy = true;\n\t\t\t}\n\n\t\t\t// POST body to querystring\n\t\t\tif (p.data && (p.method === 'get' || p.method === 'delete')) {\n\t\t\t\t// Attach the p.data to the querystring.\n\t\t\t\t_this.extend(p.query, p.data);\n\t\t\t\tp.data = null;\n\t\t\t}\n\n\t\t\t// Construct the path\n\t\t\tvar path = _this.qs(p.url, p.query);\n\n\t\t\t// Proxy the request through a server\n\t\t\t// Used for signing OAuth1\n\t\t\t// And circumventing services without Access-Control Headers\n\t\t\tif (p.proxy) {\n\t\t\t\t// Use the proxy as a path\n\t\t\t\tpath = _this.qs(p.oauth_proxy, {\n\t\t\t\t\tpath: path,\n\t\t\t\t\taccess_token: sign || '',\n\n\t\t\t\t\t// This will prompt the request to be signed as though it is OAuth1\n\t\t\t\t\tthen: p.proxy_response_type || (p.method.toLowerCase() === 'get' ? 'redirect' : 'proxy'),\n\t\t\t\t\tmethod: p.method.toLowerCase(),\n\t\t\t\t\tsuppress_response_codes: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcallback(path);\n\t\t}\n\t},\n\n\t// Return the type of DOM object\n\tdomInstance: function(type, data) {\n\t\tvar test = 'HTML' + (type || '').replace(\n\t\t\t/^[a-z]/,\n\t\t\tfunction(m) {\n\t\t\t\treturn m.toUpperCase();\n\t\t\t}\n\n\t\t) + 'Element';\n\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window[test]) {\n\t\t\treturn data instanceof window[test];\n\t\t}\n\t\telse if (window.Element) {\n\t\t\treturn data instanceof window.Element && (!type || (data.tagName && data.tagName.toLowerCase() === type));\n\t\t}\n\t\telse {\n\t\t\treturn (!(data instanceof Object || data instanceof Array || data instanceof String || data instanceof Number) && data.tagName && data.tagName.toLowerCase() === type);\n\t\t}\n\t},\n\n\t// Create a clone of an object\n\tclone: function(obj) {\n\t\t// Does not clone DOM elements, nor Binary data, e.g. Blobs, Filelists\n\t\tif (obj === null || typeof (obj) !== 'object' || obj instanceof Date || 'nodeName' in obj || this.isBinary(obj)) {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\t// Clone each item in the array\n\t\t\treturn obj.map(this.clone);\n\t\t}\n\n\t\t// But does clone everything else.\n\t\tvar clone = {};\n\t\tfor (var x in obj) {\n\t\t\tclone[x] = this.clone(obj[x]);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\t// XHR: uses CORS to make requests\n\txhr: function(method, url, headers, data, callback) {\n\n\t\tvar r = new XMLHttpRequest();\n\t\tvar error = this.error;\n\n\t\t// Binary?\n\t\tvar binary = false;\n\t\tif (method === 'blob') {\n\t\t\tbinary = method;\n\t\t\tmethod = 'GET';\n\t\t}\n\n\t\tmethod = method.toUpperCase();\n\n\t\t// Xhr.responseType 'json' is not supported in any of the vendors yet.\n\t\tr.onload = function(e) {\n\t\t\tvar json = r.response;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {\n\t\t\t\tif (r.status === 401) {\n\t\t\t\t\tjson = error('access_denied', r.statusText);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar headers = headersToJSON(r.getAllResponseHeaders());\n\t\t\theaders.statusCode = r.status;\n\n\t\t\tcallback(json || (method === 'GET' ? error('empty_response', 'Could not get resource') : {}), headers);\n\t\t};\n\n\t\tr.onerror = function(e) {\n\t\t\tvar json = r.responseText;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {}\n\n\t\t\tcallback(json || error('access_denied', 'Could not get resource'));\n\t\t};\n\n\t\tvar x;\n\n\t\t// Should we add the query to the URL?\n\t\tif (method === 'GET' || method === 'DELETE') {\n\t\t\tdata = null;\n\t\t}\n\t\telse if (data && typeof (data) !== 'string' && !(data instanceof FormData) && !(data instanceof File) && !(data instanceof Blob)) {\n\t\t\t// Loop through and add formData\n\t\t\tvar f = new FormData();\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\tif (data[x] instanceof HTMLInputElement) {\n\t\t\t\t\tif ('files' in data[x] && data[x].files.length > 0) {\n\t\t\t\t\t\tf.append(x, data[x].files[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (data[x] instanceof Blob) {\n\t\t\t\t\tf.append(x, data[x], data.name);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf.append(x, data[x]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata = f;\n\t\t}\n\n\t\t// Open the path, async\n\t\tr.open(method, url, true);\n\n\t\tif (binary) {\n\t\t\tif ('responseType' in r) {\n\t\t\t\tr.responseType = binary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t}\n\t\t}\n\n\t\t// Set any bespoke headers\n\t\tif (headers) {\n\t\t\tfor (x in headers) {\n\t\t\t\tr.setRequestHeader(x, headers[x]);\n\t\t\t}\n\t\t}\n\n\t\tr.send(data);\n\n\t\treturn r;\n\n\t\t// Headers are returned as a string\n\t\tfunction headersToJSON(s) {\n\t\t\tvar r = {};\n\t\t\tvar reg = /([a-z\\-]+):\\s?(.*);?/gi;\n\t\t\tvar m;\n\t\t\twhile ((m = reg.exec(s))) {\n\t\t\t\tr[m[1]] = m[2];\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\t},\n\n\t// JSONP\n\t// Injects a script tag into the DOM to be executed and appends a callback function to the window object\n\t// @param string/function pathFunc either a string of the URL or a callback function pathFunc(querystringhash, continueFunc);\n\t// @param function callback a function to call on completion;\n\tjsonp: function(url, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// Change the name of the callback\n\t\tvar bool = 0;\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\tvar operaFix;\n\t\tvar result = error('server_error', 'server_error');\n\t\tvar cb = function() {\n\t\t\tif (!(bool++)) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tcallback(result);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t};\n\n\t\t// Add callback to the window object\n\t\tcallbackID = _this.globalEvent(function(json) {\n\t\t\tresult = json;\n\t\t\treturn true;\n\n\t\t\t// Mark callback as done\n\t\t}, callbackID);\n\n\t\t// The URL is a function for some cases and as such\n\t\t// Determine its value with a callback containing the new parameters of this function.\n\t\turl = url.replace(new RegExp('=\\\\?(&|$)'), '=' + callbackID + '$1');\n\n\t\t// Build script tag\n\t\tvar script = _this.append('script', {\n\t\t\tid: callbackID,\n\t\t\tname: callbackID,\n\t\t\tsrc: url,\n\t\t\tasync: true,\n\t\t\tonload: cb,\n\t\t\tonerror: cb,\n\t\t\tonreadystatechange: function() {\n\t\t\t\tif (/loaded|complete/i.test(this.readyState)) {\n\t\t\t\t\tcb();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Opera fix error\n\t\t// Problem: If an error occurs with script loading Opera fails to trigger the script.onerror handler we specified\n\t\t//\n\t\t// Fix:\n\t\t// By setting the request to synchronous we can trigger the error handler when all else fails.\n\t\t// This action will be ignored if we've already called the callback handler \"cb\" with a successful onload event\n\t\tif (window.navigator.userAgent.toLowerCase().indexOf('opera') > -1) {\n\t\t\toperaFix = _this.append('script', {\n\t\t\t\ttext: 'document.getElementById(\\'' + callbackId + '\\').onerror();'\n\t\t\t});\n\t\t\tscript.async = false;\n\t\t}\n\n\t\t// Add timeout\n\t\tif (timeout) {\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tresult = error('timeout', 'timeout');\n\t\t\t\tcb();\n\t\t\t}, timeout);\n\t\t}\n\n\t\t// TODO: add fix for IE,\n\t\t// However: unable recreate the bug of firing off the onreadystatechange before the script content has been executed and the value of \"result\" has been defined.\n\t\t// Inject script tag into the head element\n\t\thead.appendChild(script);\n\n\t\t// Append Opera Fix to run after our script\n\t\tif (operaFix) {\n\t\t\thead.appendChild(operaFix);\n\t\t}\n\t},\n\n\t// Post\n\t// Send information to a remote location using the post mechanism\n\t// @param string uri path\n\t// @param object data, key value data to send\n\t// @param function callback, function to execute in response\n\tpost: function(url, data, options, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\t\tvar doc = document;\n\n\t\t// This hack needs a form\n\t\tvar form = null;\n\t\tvar reenableAfterSubmit = [];\n\t\tvar newform;\n\t\tvar i = 0;\n\t\tvar x = null;\n\t\tvar bool = 0;\n\t\tvar cb = function(r) {\n\t\t\tif (!(bool++)) {\n\t\t\t\tcallback(r);\n\t\t\t}\n\t\t};\n\n\t\t// What is the name of the callback to contain\n\t\t// We'll also use this to name the iframe\n\t\t_this.globalEvent(cb, callbackID);\n\n\t\t// Build the iframe window\n\t\tvar win;\n\t\ttry {\n\t\t\t// IE7 hack, only lets us define the name here, not later.\n\t\t\twin = doc.createElement('<iframe name=\"' + callbackID + '\">');\n\t\t}\n\t\tcatch (e) {\n\t\t\twin = doc.createElement('iframe');\n\t\t}\n\n\t\twin.name = callbackID;\n\t\twin.id = callbackID;\n\t\twin.style.display = 'none';\n\n\t\t// Override callback mechanism. Triggger a response onload/onerror\n\t\tif (options && options.callbackonload) {\n\t\t\t// Onload is being fired twice\n\t\t\twin.onload = function() {\n\t\t\t\tcb({\n\t\t\t\t\tresponse: 'posted',\n\t\t\t\t\tmessage: 'Content was posted'\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tcb(error('timeout', 'The post operation timed out'));\n\t\t\t}, timeout);\n\t\t}\n\n\t\tdoc.body.appendChild(win);\n\n\t\t// If we are just posting a single item\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// Get the parent form\n\t\t\tform = data.form;\n\n\t\t\t// Loop through and disable all of its siblings\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (form.elements[i] !== data) {\n\t\t\t\t\tform.elements[i].setAttribute('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Move the focus to the form\n\t\t\tdata = form;\n\t\t}\n\n\t\t// Posting a form\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// This is a form element\n\t\t\tform = data;\n\n\t\t\t// Does this form need to be a multipart form?\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (!form.elements[i].disabled && form.elements[i].type === 'file') {\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t\tform.elements[i].setAttribute('name', 'file');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Its not a form element,\n\t\t\t// Therefore it must be a JSON object of Key=>Value or Key=>Element\n\t\t\t// If anyone of those values are a input type=file we shall shall insert its siblings into the form for which it belongs.\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\t// Is this an input Element?\n\t\t\t\tif (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\tform = data[x].form;\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do If there is no defined form element, lets create one.\n\t\t\tif (!form) {\n\t\t\t\t// Build form\n\t\t\t\tform = doc.createElement('form');\n\t\t\t\tdoc.body.appendChild(form);\n\t\t\t\tnewform = form;\n\t\t\t}\n\n\t\t\tvar input;\n\n\t\t\t// Add elements to the form if they dont exist\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t// Is this an element?\n\t\t\t\tvar el = (_this.domInstance('input', data[x]) || _this.domInstance('textArea', data[x]) || _this.domInstance('select', data[x]));\n\n\t\t\t\t// Is this not an input element, or one that exists outside the form.\n\t\t\t\tif (!el || data[x].form !== form) {\n\n\t\t\t\t\t// Does an element have the same name?\n\t\t\t\t\tvar inputs = form.elements[x];\n\t\t\t\t\tif (input) {\n\t\t\t\t\t\t// Remove it.\n\t\t\t\t\t\tif (!(inputs instanceof NodeList)) {\n\t\t\t\t\t\t\tinputs = [inputs];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create an input element\n\t\t\t\t\tinput = doc.createElement('input');\n\t\t\t\t\tinput.setAttribute('type', 'hidden');\n\t\t\t\t\tinput.setAttribute('name', x);\n\n\t\t\t\t\t// Does it have a value attribute?\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tinput.value = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tinput.value = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tinput.value = data[x];\n\t\t\t\t\t}\n\n\t\t\t\t\tform.appendChild(input);\n\t\t\t\t}\n\n\t\t\t\t// It is an element, which exists within the form, but the name is wrong\n\t\t\t\telse if (el && data[x].name !== x) {\n\t\t\t\t\tdata[x].setAttribute('name', x);\n\t\t\t\t\tdata[x].name = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Disable elements from within the form if they weren't specified\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\n\t\t\t\tinput = form.elements[i];\n\n\t\t\t\t// Does the same name and value exist in the parent\n\t\t\t\tif (!(input.name in data) && input.getAttribute('disabled') !== true) {\n\t\t\t\t\t// Disable\n\t\t\t\t\tinput.setAttribute('disabled', true);\n\n\t\t\t\t\t// Add re-enable to callback\n\t\t\t\t\treenableAfterSubmit.push(input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set the target of the form\n\t\tform.setAttribute('method', 'POST');\n\t\tform.setAttribute('target', callbackID);\n\t\tform.target = callbackID;\n\n\t\t// Update the form URL\n\t\tform.setAttribute('action', url);\n\n\t\t// Submit the form\n\t\t// Some reason this needs to be offset from the current window execution\n\t\tsetTimeout(function() {\n\t\t\tform.submit();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\ttry {\n\t\t\t\t\t// Remove the iframe from the page.\n\t\t\t\t\t//win.parentNode.removeChild(win);\n\t\t\t\t\t// Remove the form\n\t\t\t\t\tif (newform) {\n\t\t\t\t\t\tnewform.parentNode.removeChild(newform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.error('HelloJS: could not remove iframe');\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ee) {}\n\t\t\t\t}\n\n\t\t\t\t// Reenable the disabled form\n\t\t\t\tfor (var i = 0; i < reenableAfterSubmit.length; i++) {\n\t\t\t\t\tif (reenableAfterSubmit[i]) {\n\t\t\t\t\t\treenableAfterSubmit[i].setAttribute('disabled', false);\n\t\t\t\t\t\treenableAfterSubmit[i].disabled = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}, 100);\n\t},\n\n\t// Some of the providers require that only multipart is used with non-binary forms.\n\t// This function checks whether the form contains binary data\n\thasBinary: function(data) {\n\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\t\t\tif (this.isBinary(data[x])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// Determines if a variable Either Is or like a FormInput has the value of a Blob\n\n\tisBinary: function(data) {\n\n\t\treturn data instanceof Object && (\n\t\t(this.domInstance('input', data) && data.type === 'file') ||\n\t\t('FileList' in window && data instanceof window.FileList) ||\n\t\t('File' in window && data instanceof window.File) ||\n\t\t('Blob' in window && data instanceof window.Blob));\n\n\t},\n\n\t// Convert Data-URI to Blob string\n\ttoBlob: function(dataURI) {\n\t\tvar reg = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\t\tvar m = dataURI.match(reg);\n\t\tif (!m) {\n\t\t\treturn dataURI;\n\t\t}\n\n\t\tvar binary = atob(dataURI.replace(reg, ''));\n\t\tvar array = [];\n\t\tfor (var i = 0; i < binary.length; i++) {\n\t\t\tarray.push(binary.charCodeAt(i));\n\t\t}\n\n\t\treturn new Blob([new Uint8Array(array)], {type: m[1]});\n\t}\n\n});\n\n// EXTRA: Convert FormElement to JSON for POSTing\n// Wrappers to add additional functionality to existing functions\n(function(hello) {\n\n\t// Copy original function\n\tvar api = hello.api;\n\tvar utils = hello.utils;\n\n\tutils.extend(utils, {\n\n\t\t// DataToJSON\n\t\t// This takes a FormElement|NodeList|InputElement|MixedObjects and convers the data object to JSON.\n\t\tdataToJSON: function(p) {\n\n\t\t\tvar _this = this;\n\t\t\tvar w = window;\n\t\t\tvar data = p.data;\n\n\t\t\t// Is data a form object\n\t\t\tif (_this.domInstance('form', data)) {\n\t\t\t\tdata = _this.nodeListToJSON(data.elements);\n\t\t\t}\n\t\t\telse if ('NodeList' in w && data instanceof NodeList) {\n\t\t\t\tdata = _this.nodeListToJSON(data);\n\t\t\t}\n\t\t\telse if (_this.domInstance('input', data)) {\n\t\t\t\tdata = _this.nodeListToJSON([data]);\n\t\t\t}\n\n\t\t\t// Is data a blob, File, FileList?\n\t\t\tif (('File' in w && data instanceof w.File) ||\n\t\t\t\t('Blob' in w && data instanceof w.Blob) ||\n\t\t\t\t('FileList' in w && data instanceof w.FileList)) {\n\t\t\t\tdata = {file: data};\n\t\t\t}\n\n\t\t\t// Loop through data if it's not form data it must now be a JSON object\n\t\t\tif (!('FormData' in w && data instanceof w.FormData)) {\n\n\t\t\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t\tif ('FileList' in w && data[x] instanceof w.FileList) {\n\t\t\t\t\t\tif (data[x].length === 1) {\n\t\t\t\t\t\t\tdata[x] = data[x][0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('select', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('textArea', data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.data = data;\n\t\t\treturn data;\n\t\t},\n\n\t\t// NodeListToJSON\n\t\t// Given a list of elements extrapolate their values and return as a json object\n\t\tnodeListToJSON: function(nodelist) {\n\n\t\t\tvar json = {};\n\n\t\t\t// Create a data string\n\t\t\tfor (var i = 0; i < nodelist.length; i++) {\n\n\t\t\t\tvar input = nodelist[i];\n\n\t\t\t\t// If the name of the input is empty or diabled, dont add it.\n\t\t\t\tif (input.disabled || !input.name) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Is this a file, does the browser not support 'files' and 'FormData'?\n\t\t\t\tif (input.type === 'file') {\n\t\t\t\t\tjson[input.name] = input;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjson[input.name] = input.value || input.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn json;\n\t\t}\n\t});\n\n\t// Replace it\n\thello.api = function() {\n\n\t\t// Get arguments\n\t\tvar p = utils.args({path: 's!', method: 's', data:'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t\t// Change for into a data object\n\t\tif (p.data) {\n\t\t\tutils.dataToJSON(p);\n\t\t}\n\n\t\treturn api.call(this, p);\n\t};\n\n})(hello);\n","(function(hello) {\n\n\thello.init({\n\n\t\tfacebook: {\n\n\t\t\tname: 'Facebook',\n\n\t\t\t// SEE https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/v2.1\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://www.facebook.com/dialog/oauth/',\n\t\t\t\tgrant: 'https://graph.facebook.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'public_profile',\n\t\t\t\temail: 'email',\n\t\t\t\tbirthday: 'user_birthday',\n\t\t\t\tevents: 'user_events',\n\t\t\t\tphotos: 'user_photos,user_videos',\n\t\t\t\tvideos: 'user_photos,user_videos',\n\t\t\t\tfriends: 'user_friends',\n\t\t\t\tfiles: 'user_photos,user_videos',\n\t\t\t\tpublish_files: 'user_photos,user_videos,publish_actions',\n\t\t\t\tpublish: 'publish_actions',\n\n\t\t\t\t// Deprecated in v2.0\n\t\t\t\t// Create_event\t: 'create_event',\n\n\t\t\t\toffline_access: 'offline_access'\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Support Facebook's unique auth_type parameter\n\t\t\t\tif (p.options.auth_type) {\n\t\t\t\t\tp.qs.auth_type = p.options.auth_type;\n\t\t\t\t}\n\n\t\t\t\t// The facebook login window is a different size.\n\t\t\t\tp.options.window_width = 580;\n\t\t\t\tp.options.window_height = 400;\n\t\t\t},\n\n\t\t\tlogout: function(callback) {\n\t\t\t\t// Assign callback to a global handler\n\t\t\t\tvar callbackID = hello.utils.globalEvent(callback);\n\t\t\t\tvar redirect = encodeURIComponent(hello.settings.redirect_uri + '?' + hello.utils.param({callback:callbackID, result: JSON.stringify({force:true}), state: '{}'}));\n\t\t\t\tvar token = (hello.utils.store('facebook') || {}).access_token;\n\t\t\t\thello.utils.iframe('https://www.facebook.com/logout.php?next=' + redirect + '&access_token=' + token);\n\n\t\t\t\t// Possible responses:\n\t\t\t\t// String URL\t- hello.logout should handle the logout\n\t\t\t\t// Undefined\t- this function will handle the callback\n\t\t\t\t// True - throw a success, this callback isn't handling the callback\n\t\t\t\t// False - throw a error\n\t\t\t\tif (!token) {\n\t\t\t\t\t// If there isn't a token, the above wont return a response, so lets trigger a response\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://graph.facebook.com/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'me',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/friends',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/like': 'me/likes',\n\t\t\t\t'me/files': 'me/albums',\n\t\t\t\t'me/albums': 'me/albums',\n\t\t\t\t'me/album': '@{id}/photos',\n\t\t\t\t'me/photos': 'me/photos',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'friend/albums': '@{id}/albums',\n\t\t\t\t'friend/photos': '@{id}/photos'\n\n\t\t\t\t// Pagination\n\t\t\t\t// Https://developers.facebook.com/docs/reference/api/pagination/\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/photo': '@{id}'\n\n\t\t\t\t// Https://developers.facebook.com/docs/graph-api/reference/v2.2/object/likes/\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/albums': format,\n\t\t\t\t'me/files': format,\n\t\t\t\t'default': format\n\t\t\t},\n\n\t\t\t// Special requirements for handling XHR\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method === 'get' || p.method === 'post') {\n\t\t\t\t\tqs.suppress_response_codes = true;\n\t\t\t\t}\n\n\t\t\t\t// Is this a post with a data-uri?\n\t\t\t\tif (p.method === 'post' && p.data && typeof (p.data.file) === 'string') {\n\t\t\t\t\t// Convert the Data-URI to a Blob\n\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Special requirements for handling JSONP fallback\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tvar m = p.method;\n\t\t\t\tif (m !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = m;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'delete') {\n\t\t\t\t\tqs.method = 'delete';\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Special requirements for iframe form hack\n\t\t\tform: function(p) {\n\t\t\t\treturn {\n\t\t\t\t\t// Fire the callback onload\n\t\t\t\t\tcallbackonload: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\n\tvar base = 'https://graph.facebook.com/';\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = 'https://graph.facebook.com/' + o.id + '/picture';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(formatUser);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction format(o, headers, req) {\n\t\tif (typeof o === 'boolean') {\n\t\t\to = {success: o};\n\t\t}\n\n\t\tif (o && 'data' in o) {\n\t\t\tvar token = req.query.access_token;\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\tif (d.cover_photo) {\n\t\t\t\t\td.thumbnail = base + d.cover_photo + '/picture?access_token=' + token;\n\t\t\t\t}\n\n\t\t\t\tif (d.type === 'album') {\n\t\t\t\t\td.files = d.photos = base + d.id + '/photos';\n\t\t\t\t}\n\n\t\t\t\tif (d.can_upload) {\n\t\t\t\t\td.upload_location = base + d.id + '/photos';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n","(function(hello) {\n\n\thello.init({\n\n\t\tgithub: {\n\n\t\t\tname: 'GitHub',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://github.com/login/oauth/authorize',\n\t\t\t\tgrant: 'https://github.com/login/oauth/access_token',\n\t\t\t\tresponse_type: 'code'\n\t\t\t},\n\n\t\t\tscope: {\n\t\t\t\tbasic: '',\n\t\t\t\temail: 'user:email'\n\t\t\t},\n\n\t\t\tbase: 'https://api.github.com/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\t'me/friends': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/following': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/followers': 'user/followers?per_page=@{limit|100}',\n\t\t\t\t'me/like': 'user/starred?per_page=@{limit|100}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\n\t\t\t\t\tformatError(o, headers);\n\t\t\t\t\tformatUser(o);\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {data:o};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (o.data) {\n\t\t\t\t\t\tpaging(o, headers, req);\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method !== 'get' && p.data) {\n\n\t\t\t\t\t// Serialize payload as JSON\n\t\t\t\t\tp.headers = p.headers || {};\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar code = headers ? headers.statusCode : (o && 'meta' in o && 'status' in o.meta && o.meta.status);\n\t\tif ((code === 401 || code === 403)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.message || (o.data ? o.data.message : 'Could not get response')\n\t\t\t};\n\t\t\tdelete o.message;\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = o.avatar_url;\n\t\t\to.name = o.login;\n\t\t}\n\t}\n\n\tfunction paging(res, headers, req) {\n\t\tif (res.data && res.data.length && headers && headers.Link) {\n\t\t\tvar next = headers.Link.match(/<(.*?)>;\\s*rel=\\\"next\\\"/);\n\t\t\tif (next) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: next[1]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n})(hello);\n","(function(hello) {\n\n\t// URLs\n\tvar contactsUrl = 'https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}';\n\n\thello.init({\n\n\t\tgoogle: {\n\n\t\t\tname: 'Google Plus',\n\n\t\t\t// REF: http://code.google.com/apis/accounts/docs/OAuth2UserAgent.html\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://accounts.google.com/o/oauth2/auth',\n\t\t\t\tgrant: 'https://accounts.google.com/o/oauth2/token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'https://www.googleapis.com/auth/plus.me profile',\n\t\t\t\temail: 'email',\n\t\t\t\tbirthday: '',\n\t\t\t\tevents: '',\n\t\t\t\tphotos: 'https://picasaweb.google.com/data/',\n\t\t\t\tvideos: 'http://gdata.youtube.com',\n\t\t\t\tfriends: 'https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login',\n\t\t\t\tfiles: 'https://www.googleapis.com/auth/drive.readonly',\n\t\t\t\tpublish: '',\n\t\t\t\tpublish_files: 'https://www.googleapis.com/auth/drive',\n\t\t\t\tcreate_event: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\t// Login\n\t\t\tlogin: function(p) {\n\t\t\t\tif (p.qs.display === 'none') {\n\t\t\t\t\t// Google doesn't like display=none\n\t\t\t\t\tp.qs.display = '';\n\t\t\t\t}\n\n\t\t\t\tif (p.qs.response_type === 'code') {\n\n\t\t\t\t\t// Lets set this to an offline access to return a refresh_token\n\t\t\t\t\tp.qs.access_type = 'offline';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API base URI\n\t\t\tbase: 'https://www.googleapis.com/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'plus/v1/people/me',\n\n\t\t\t\t// Deprecated Sept 1, 2014\n\t\t\t\t//'me': 'oauth2/v1/userinfo?alt=json',\n\n\t\t\t\t// See: https://developers.google.com/+/api/latest/people/list\n\t\t\t\t'me/friends': 'plus/v1/people/me/people/visible?maxResults=@{limit|100}',\n\t\t\t\t'me/following': contactsUrl,\n\t\t\t\t'me/followers': contactsUrl,\n\t\t\t\t'me/contacts': contactsUrl,\n\t\t\t\t'me/share': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/feed': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/albums': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}',\n\t\t\t\t'me/album': function(p, callback) {\n\t\t\t\t\tvar key = p.query.id;\n\t\t\t\t\tdelete p.query.id;\n\t\t\t\t\tcallback(key.replace('/entry/', '/feed/'));\n\t\t\t\t},\n\n\t\t\t\t'me/photos': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/files': 'drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folders': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folder': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\n\t\t\t\t// Google Drive\n\t\t\t\t'me/files': uploadDrive,\n\t\t\t\t'me/folders': function(p, callback) {\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\ttitle: p.data.name,\n\t\t\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\t\t\tmimeType: 'application/vnd.google-apps.folder'\n\t\t\t\t\t};\n\t\t\t\t\tcallback('drive/v2/files');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map PUT requests\n\t\t\tput: {\n\t\t\t\t'me/files': uploadDrive\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'drive/v2/files/@{id}',\n\t\t\t\t'me/folder': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\to.last_name = o.family_name || (o.name ? o.name.familyName : null);\n\t\t\t\t\t\to.first_name = o.given_name || (o.name ? o.name.givenName : null);\n\n\t\t\t\t\t\tif (o.emails && o.emails.length) {\n\t\t\t\t\t\t\to.email = o.emails[0].value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tformatPerson(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': function(o) {\n\t\t\t\t\tif (o.items) {\n\t\t\t\t\t\tpaging(o);\n\t\t\t\t\t\to.data = o.items;\n\t\t\t\t\t\to.data.forEach(formatPerson);\n\t\t\t\t\t\tdelete o.items;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/share': formatFeed,\n\t\t\t\t'me/feed': formatFeed,\n\t\t\t\t'me/albums': gEntry,\n\t\t\t\t'me/photos': gEntry,\n\t\t\t\t'default': gEntry\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method === 'post' || p.method === 'put') {\n\t\t\t\t\ttoJSON(p);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Don't even try submitting via form.\n\t\t\t// This means no POST operations in <=IE9\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction toInt(s) {\n\t\treturn parseInt(s, 10);\n\t}\n\n\tfunction formatFeed(o) {\n\t\tpaging(o);\n\t\to.data = o.items;\n\t\tdelete o.items;\n\t\treturn o;\n\t}\n\n\t// Format: ensure each record contains a name, id etc.\n\tfunction formatItem(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!o.name) {\n\t\t\to.name = o.title || o.message;\n\t\t}\n\n\t\tif (!o.picture) {\n\t\t\to.picture = o.thumbnailLink;\n\t\t}\n\n\t\tif (!o.thumbnail) {\n\t\t\to.thumbnail = o.thumbnailLink;\n\t\t}\n\n\t\tif (o.mimeType === 'application/vnd.google-apps.folder') {\n\t\t\to.type = 'folder';\n\t\t\to.files = 'https://www.googleapis.com/drive/v2/files?q=%22' + o.id + '%22+in+parents';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(item) {\n\t\treturn {\n\t\t\tsource: item.url,\n\t\t\twidth: item.width,\n\t\t\theight: item.height\n\t\t};\n\t}\n\n\t// Google has a horrible JSON API\n\tfunction gEntry(o) {\n\t\tpaging(o);\n\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\to.data = o.feed.entry.map(formatEntry);\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\t// Old style, Picasa, etc...\n\t\telse if ('entry' in o) {\n\t\t\treturn formatEntry(o.entry);\n\t\t}\n\n\t\t// New Style, Google Drive & Plus\n\t\telse if ('items' in o) {\n\t\t\to.data = o.items.map(formatItem);\n\t\t\tdelete o.items;\n\t\t}\n\t\telse {\n\t\t\tformatItem(o);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatPerson(o) {\n\t\to.name = o.displayName || o.name;\n\t\to.picture = o.picture || (o.image ? o.image.url : null);\n\t\to.thumbnail = o.picture;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tpaging(o);\n\t\tvar r = [];\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tfor (var i = 0; i < o.feed.entry.length; i++) {\n\t\t\t\tvar a = o.feed.entry[i];\n\n\t\t\t\ta.id\t= a.id.$t;\n\t\t\t\ta.name\t= a.title.$t;\n\t\t\t\tdelete a.title;\n\t\t\t\tif (a.gd$email) {\n\t\t\t\t\ta.email\t= (a.gd$email && a.gd$email.length > 0) ? a.gd$email[0].address : null;\n\t\t\t\t\ta.emails = a.gd$email;\n\t\t\t\t\tdelete a.gd$email;\n\t\t\t\t}\n\n\t\t\t\tif (a.updated) {\n\t\t\t\t\ta.updated = a.updated.$t;\n\t\t\t\t}\n\n\t\t\t\tif (a.link) {\n\t\t\t\t\tvar pic = (a.link.length > 0) ? a.link[0].href + '?access_token=' + token : null;\n\t\t\t\t\tif (pic) {\n\t\t\t\t\t\ta.picture = pic;\n\t\t\t\t\t\ta.thumbnail = pic;\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete a.link;\n\t\t\t\t}\n\n\t\t\t\tif (a.category) {\n\t\t\t\t\tdelete a.category;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\to.data = o.feed.entry;\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatEntry(a) {\n\n\t\tvar group = a.media$group;\n\t\tvar media = group.media$content.length ? group.media$content[0] : {};\n\t\tvar i = 0;\n\t\tvar _a;\n\t\tvar p = {\n\t\t\tid: a.id.$t,\n\t\t\tname: a.title.$t,\n\t\t\tdescription: a.summary.$t,\n\t\t\tupdated_time: a.updated.$t,\n\t\t\tcreated_time: a.published.$t,\n\t\t\tpicture: media ? media.url : null,\n\t\t\timages: [],\n\t\t\tthumbnail: media ? media.url : null,\n\t\t\twidth: media.width,\n\t\t\theight: media.height\n\t\t};\n\n\t\t// Get feed/children\n\t\tif ('link' in a) {\n\t\t\tfor (i = 0; i < a.link.length; i++) {\n\t\t\t\tvar d = a.link[i];\n\t\t\t\tif (d.rel.match(/\\#feed$/)) {\n\t\t\t\t\tp.upload_location = p.files = p.photos = d.href;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('category' in a && a.category.length) {\n\t\t\t_a = a.category;\n\t\t\tfor (i = 0; i < _a.length; i++) {\n\t\t\t\tif (_a[i].scheme && _a[i].scheme.match(/\\#kind$/)) {\n\t\t\t\t\tp.type = _a[i].term.replace(/^.*?\\#/, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('media$thumbnail' in group && group.media$thumbnail.length) {\n\t\t\t_a = group.media$thumbnail;\n\t\t\tp.thumbnail = _a[0].url;\n\t\t\tp.images = _a.map(formatImage);\n\t\t}\n\n\t\t_a = group.media$content;\n\n\t\tif (_a && _a.length) {\n\t\t\tp.images.push(formatImage(_a[0]));\n\t\t}\n\n\t\treturn p;\n\t}\n\n\tfunction paging(res) {\n\n\t\t// Contacts V2\n\t\tif ('feed' in res && res.feed.openSearch$itemsPerPage) {\n\t\t\tvar limit = toInt(res.feed.openSearch$itemsPerPage.$t);\n\t\t\tvar start = toInt(res.feed.openSearch$startIndex.$t);\n\t\t\tvar total = toInt(res.feed.openSearch$totalResults.$t);\n\n\t\t\tif ((start + limit) < total) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: '?start=' + (start + limit)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\telse if ('nextPageToken' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?pageToken=' + res.nextPageToken\n\t\t\t};\n\t\t}\n\t}\n\n\t// Construct a multipart message\n\tfunction Multipart() {\n\n\t\t// Internal body\n\t\tvar body = [];\n\t\tvar boundary = (Math.random() * 1e10).toString(32);\n\t\tvar counter = 0;\n\t\tvar lineBreak = '\\r\\n';\n\t\tvar delim = lineBreak + '--' + boundary;\n\t\tvar ready = function() {};\n\n\t\tvar dataUri = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\n\t\t// Add file\n\t\tfunction addFile(item) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function(e) {\n\t\t\t\taddContent(btoa(e.target.result), item.type + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t};\n\n\t\t\tfr.readAsBinaryString(item);\n\t\t}\n\n\t\t// Add content\n\t\tfunction addContent(content, type) {\n\t\t\tbody.push(lineBreak + 'Content-Type: ' + type + lineBreak + lineBreak + content);\n\t\t\tcounter--;\n\t\t\tready();\n\t\t}\n\n\t\t// Add new things to the object\n\t\tthis.append = function(content, type) {\n\n\t\t\t// Does the content have an array\n\t\t\tif (typeof (content) === 'string' || !('length' in Object(content))) {\n\t\t\t\t// Converti to multiples\n\t\t\t\tcontent = [content];\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < content.length; i++) {\n\n\t\t\t\tcounter++;\n\n\t\t\t\tvar item = content[i];\n\n\t\t\t\t// Is this a file?\n\t\t\t\t// Files can be either Blobs or File types\n\t\t\t\tif (\n\t\t\t\t\t(typeof (File) !== 'undefined' && item instanceof File) ||\n\t\t\t\t\t(typeof (Blob) !== 'undefined' && item instanceof Blob)\n\t\t\t\t) {\n\t\t\t\t\t// Read the file in\n\t\t\t\t\taddFile(item);\n\t\t\t\t}\n\n\t\t\t\t// Data-URI?\n\t\t\t\t// Data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\t\t\t\t// /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i\n\t\t\t\telse if (typeof (item) === 'string' && item.match(dataUri)) {\n\t\t\t\t\tvar m = item.match(dataUri);\n\t\t\t\t\taddContent(item.replace(dataUri, ''), m[1] + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t\t}\n\n\t\t\t\t// Regular string\n\t\t\t\telse {\n\t\t\t\t\taddContent(item, type);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.onready = function(fn) {\n\t\t\tready = function() {\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Trigger ready\n\t\t\t\t\tbody.unshift('');\n\t\t\t\t\tbody.push('--');\n\t\t\t\t\tfn(body.join(delim), boundary);\n\t\t\t\t\tbody = [];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tready();\n\t\t};\n\t}\n\n\t// Upload to Drive\n\t// If this is PUT then only augment the file uploaded\n\t// PUT https://developers.google.com/drive/v2/reference/files/update\n\t// POST https://developers.google.com/drive/manage-uploads\n\tfunction uploadDrive(p, callback) {\n\n\t\tvar data = {};\n\n\t\t// Test for DOM element\n\t\tif (p.data &&\n\t\t\t(typeof (HTMLInputElement) !== 'undefined' && p.data instanceof HTMLInputElement)\n\t\t) {\n\t\t\tp.data = {file: p.data};\n\t\t}\n\n\t\tif (!p.data.name && Object(Object(p.data.file).files).length && p.method === 'post') {\n\t\t\tp.data.name = p.data.file.files[0].name;\n\t\t}\n\n\t\tif (p.method === 'post') {\n\t\t\tp.data = {\n\t\t\t\ttitle: p.data.name,\n\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\tfile: p.data.file\n\t\t\t};\n\t\t}\n\t\telse {\n\n\t\t\t// Make a reference\n\t\t\tdata = p.data;\n\t\t\tp.data = {};\n\n\t\t\t// Add the parts to change as required\n\t\t\tif (data.parent) {\n\t\t\t\tp.data.parents = [{id: p.data.parent || 'root'}];\n\t\t\t}\n\n\t\t\tif (data.file) {\n\t\t\t\tp.data.file = data.file;\n\t\t\t}\n\n\t\t\tif (data.name) {\n\t\t\t\tp.data.title = data.name;\n\t\t\t}\n\t\t}\n\n\t\t// Extract the file, if it exists from the data object\n\t\t// If the File is an INPUT element lets just concern ourselves with the NodeList\n\t\tvar file;\n\t\tif ('file' in p.data) {\n\t\t\tfile = p.data.file;\n\t\t\tdelete p.data.file;\n\n\t\t\tif (typeof (file) === 'object' && 'files' in file) {\n\t\t\t\t// Assign the NodeList\n\t\t\t\tfile = file.files;\n\t\t\t}\n\n\t\t\tif (!file || !file.length) {\n\t\t\t\tcallback({\n\t\t\t\t\terror: {\n\t\t\t\t\t\tcode: 'request_invalid',\n\t\t\t\t\t\tmessage: 'There were no files attached with this request to upload'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Set type p.data.mimeType = Object(file[0]).type || 'application/octet-stream';\n\n\t\t// Construct a multipart message\n\t\tvar parts = new Multipart();\n\t\tparts.append(JSON.stringify(p.data), 'application/json');\n\n\t\t// Read the file into a  base64 string... yep a hassle, i know\n\t\t// FormData doesn't let us assign our own Multipart headers and HTTP Content-Type\n\t\t// Alas GoogleApi need these in a particular format\n\t\tif (file) {\n\t\t\tparts.append(file);\n\t\t}\n\n\t\tparts.onready(function(body, boundary) {\n\n\t\t\tp.headers['content-type'] = 'multipart/related; boundary=\"' + boundary + '\"';\n\t\t\tp.data = body;\n\n\t\t\tcallback('upload/drive/v2/files' + (data.id ? '/' + data.id : '') + '?uploadType=multipart');\n\t\t});\n\n\t}\n\n\tfunction toJSON(p) {\n\t\tif (typeof (p.data) === 'object') {\n\t\t\t// Convert the POST into a javascript object\n\t\t\ttry {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\tp.headers['content-type'] = 'application/json';\n\t\t\t}\n\t\t\tcatch (e) {}\n\t\t}\n\t}\n\n})(hello);\n","(function (hello) {\n    hello.init({\n        jbHub: {\n            name: \"JetBrains Hub\",\n\n            oauth: {\n                version: 2,\n                auth: 'https://sso.jetbrains.com/api/rest/oauth2/auth',\n                grant: 'https://sso.jetbrains.com/api/rest/oauth2/auth'\n            },\n\n            scope: {\n                basic: \"0-0-0-0-0\"\n            },\n\n            base: 'https://sso.jetbrains.com/api/rest/',\n\n            get: {\n                me: 'users/me'\n            },\n\n            xhr: function (p) {\n                var accessToken = p.options.access_token\n                if (accessToken != null) {\n                    delete p.options.access_token\n                    p.headers.Authorization = \"Bearer \" + accessToken\n                    p.headers.Accept = \"application/json\"\n                }\n                return true;\n            }\n        }\n    })\n})(hello)\n","// Register as anonymous AMD module\nif (typeof define === 'function' && define.amd) {\n\tdefine(function() {\n\t\treturn hello;\n\t});\n}\n"],"sourceRoot":"/source/"}